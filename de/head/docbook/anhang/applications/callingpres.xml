<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
"http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd">
<section id="applications-callingpres" revision="$Revision$">
    <title><literal>CallingPres()</literal></title>

    <indexterm significance="preferred">
      <primary>Dialplan-Applikationen</primary>

      <secondary><code>CallingPres()</code></secondary>
    </indexterm>

    <simpara>Ändert die Präsentation der Anrufer-ID (Caller-ID).</simpara>

    <synopsis>CallingPres(<replaceable>presentation</replaceable>)</synopsis>

    <simpara>Ändert die Präsentations-Parameter für die Anrufer ID auf einer
    Q.931 PRI-Verbindung. Diese Parameter sollten gesetzt sein, bevor ein
    ausgehender Anruf getätigt wird. Der Präsentations-Parameter
    <code>presentation</code> bestimmt zum ersten, ob der angerufene
    Teilnehmer die Caller-ID-Information angezeigt bekommt oder nicht, und zum
    zweiten, ob die Caller-ID-Information von verlässlicher Quelle auf
    verifiziert geprüft wurde oder nicht (engl.: screening).</simpara>

    <simpara>Diese Anwendung wurde durch <code>SetCallerPres()</code> ersetzt,
    welche einfacher handzuhaben und weniger abhängig von Zaptel
    ist.</simpara>

    <simpara>Diese Anwendung generiert aus der Kombination von
    Anrufpräsentations-Einstellungen und Screening-Einstellungen eine Zahl.
    Die Werte selbst sind im ITU Q.931-Standard wie in den folgenden Tabellen
    definiert.</simpara>

    <para>Screening wird durch die Bits 1 und 2 gesteuert: <informaltable
        colsep="0" frame="none" rowsep="0">
        <tgroup cols="3">
          <colspec colnum="1" colwidth="30pt" />

          <colspec colnum="2" colwidth="30pt" />

          <thead>
            <row>
              <entry>Bit1</entry>

              <entry>Bit2</entry>

              <entry>Erläuterung</entry>
            </row>
          </thead>

          <tbody>
            <row>
              <entry>0</entry>

              <entry>0</entry>

              <entry>Die Caller-ID-Information liefert der Teilnehmer, sie ist
              nicht verifiziert.</entry>
            </row>

            <row>
              <entry>0</entry>

              <entry>1</entry>

              <entry>Die Caller-ID-Information liefert der Teilnehmer, sie ist
              erfolgreich verifiziert.</entry>
            </row>

            <row>
              <entry>1</entry>

              <entry>0</entry>

              <entry>Die Caller-ID-Information liefert der Teilnehmer, die
              Verifizierung war nicht erfolgreich.</entry>
            </row>

            <row>
              <entry>1</entry>

              <entry>1</entry>

              <entry>Die Caller-ID-Information liefert das Netzwerk.</entry>
            </row>
          </tbody>
        </tgroup>
      </informaltable></para>

    <para>Präsentation wird durch die Bits 6 und 7 gesteuert: <informaltable
        colsep="0" frame="none" rowsep="0">
        <tgroup cols="3">
          <colspec colnum="1" colwidth="30pt" />

          <colspec colnum="2" colwidth="30pt" />

          <thead>
            <row>
              <entry>Bit6</entry>

              <entry>Bit7</entry>

              <entry>Erläuterung</entry>
            </row>
          </thead>

          <tbody>
            <row>
              <entry>0</entry>

              <entry>0</entry>

              <entry>Anzeige der Caller-ID-Information ist erlaubt.</entry>
            </row>

            <row>
              <entry>0</entry>

              <entry>1</entry>

              <entry>Anzeige der Caller-ID-Information ist nicht
              erlaubt.</entry>
            </row>

            <row>
              <entry>1</entry>

              <entry>0</entry>

              <entry>Die Nummer ist aufgrund von Zwischenstationen nicht
              verfügbar.</entry>
            </row>

            <row>
              <entry>1</entry>

              <entry>1</entry>

              <entry>Reserviert</entry>
            </row>
          </tbody>
        </tgroup>
      </informaltable></para>

    <simpara>Presentation indicator (octet 3a) Bits 7 6 Meaning 0 0
    Presentation allowed 0 1 Presentation restricted 1 0 Number not available
    due to interworking 1 1 Reserved Screening indicator (octet 3a) Bits 2 1
    Meaning 0 0 User-provided, not screened 0 1 User-provided, verified and
    passed 1 0 User-provided, verified and failed 1 1 Network provided In
    essence, it says, 'Is the person who has been called allowed to see the
    callers number?' and 'What authority was used to verify that this is a
    genuine number?'</simpara>

    <simpara>Die Bits 3, 4, 5 und 8 sollten alle auf Null (0) gesetzt werden.
    Beachten Sie, dass die Bits in der Folge vom höchstwertigsten zum
    niederwertigsten nummeriert sind in der Form 87654321.</simpara>

    <programlisting>; presentation setzen auf:
; presentation erlaubt                (00000000)
; Netzwerk angegeben                  (00000011)
; ------------------                  ----------
; Ergebnis: 3 (bitweises UND)         (00000011)
exten =&gt; 123,1,CallingPres(3)
exten =&gt; 123,2,Dial(Zap/g1/1234567)
; presentation setzen auf:
; presentation nicht erlaubt          (00100000)
; vom User, verifiziert               (00000001)
; ------------------                  ----------
; Ergebnis: 33 (bitweises UND)        (00100001)
exten =&gt; 124,1,CallingPres(33)
exten =&gt; 124,2,Dial(Zap/g1/1234568)</programlisting>

    <formalpara>
      <title>Siehe auch</title>

      <para><xref linkend="applications-setcallerpres" /></para>
    </formalpara>
</section>
