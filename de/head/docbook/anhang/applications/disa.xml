<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
"http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd">
<section id="applications-disa" revision="$Revision$">
    <title><literal>DISA()</literal></title>

    <indexterm significance="preferred">
      <primary>Dialplan-Applikationen</primary>

      <secondary><code>DISA()</code></secondary>
    </indexterm>

    <simpara>Direct Inward System Access erlaubt auswärtigen Anrufern Anrufe
    mit internem System-Wählton.</simpara>

    <synopsis>DISA(<replaceable>Passwort</replaceable>[,<replaceable>Context</replaceable>[,<replaceable>CallerID</replaceable>[,<replaceable>Mailbox</replaceable>[@<replaceable>VM-Context</replaceable>]]]])</synopsis>

    <synopsis>DISA(<replaceable>Passwort-Datei</replaceable>[,<replaceable>CallerID</replaceable>[,<replaceable>Mailbox</replaceable>[@<replaceable>VM-Context</replaceable>]]])</synopsis>

    <simpara>Erlaubt Anrufern von außen einen internen System-Wählton zu
    erhalten und entsprechend Anrufe zu tätigen, als würden diese von
    innerhalb des Switches aus getätigt. Dem Teilnehmer wird ein Wählton zur
    Verfügung gestellt, nach dem er einen Zugangskode eingeben muss gefolgt
    von der Rautetaste (<code>#</code>). Ist der Zugangskode korrekt, erhält
    er einen System-Wählton, auf dem er einen Anruf tätigen kann.</simpara>

    <caution>
      <para>Diese Art von Zugang kann ein ernstes Sicherheitsrisiko sein und
      sollte sorgfältig überlegt werden, damit die Sicherheit Ihres Systems
      nicht gefährdet ist!</para>
    </caution>

    <simpara>Der <code>Passwort</code>-Parameter ist ein numerischer
    Zugangskode, den der Benutzer eingeben muss, um Anrufe tätigen zu können.
    Mit dieser Syntax werden alle Benutzer dieser Extension das gleiche
    Passwort benutzen. Möchten Sie Benutzern erlauben, <code>DISA()</code>
    ohne Passwort zu verwenden, übergeben Sie die Zeichenkette
    <code>no-password</code> an der Stelle des Passwortes.</simpara>

    <simpara>Der <code>Context</code>-Parameter spezifiziert den Context, in
    dem sich ein Benutzer einwählen wird. Wird kein Context spezifiziert,
    nimmt die <code>DISA()</code>-Anwendung den Context <code>disa</code>
    an.</simpara>

    <simpara>Die <code>CallerID</code> ist die Mailbox-Nummer (und optional
    Voicemail-Context <code>VM-Context</code>) einer Voicemailbox. Der Anrufer
    wird einen so genannten <quote>stuttered dial-tone</quote> (das ist ein
    regelmäßig kurz unterbrochener, <quote>stotternder</quote> Wählton) hören,
    falls neue Nachrichten in der angegebenen Voicemailbox
    vorliegen.</simpara>

    <simpara>Außerdem können Sie eine alternative Syntax benutzen und den
    Namen einer global verfügbaren Passwortdatei statt der Parameter
    <code>Passwort</code> und <code>Context</code> übergeben. In jeder Zeile
    kann diese Datei entweder einen Zugangskode oder eine Kombination aus
    Zugangskode und Context, getrennt durch das Zeichen <code>|</code>,
    enthalten. Ist kein Context mit angegeben, wird standardmäßig der Context
    <code>disa</code> verwendet.</simpara>

    <simpara>Ist das Einloggen des Teilnehmers erfolgreich, wird die Anwendung
    die gewählte Nummer in dem spezifizierten Context
    interpretieren.</simpara>

    <programlisting>; Anrufern von außen erlauben, 0800er-Nummern zu wählen, sofern sie
; das Passwort (1234) wissen. Dabei ihre Caller-ID so setzen, dass
; es aussieht, als riefen sie von innerhalb der Firma an:
[incoming]
exten =&gt; 123,1,DISA(1234,disa,Apfelmus GmbH &lt;(0261) 1234567&gt;)
[disa]
exten =&gt; _0800XXXXXXXX,1,Dial(Zap/4/${EXTEN})</programlisting>

    <note>
      <formalpara>
        <title>Interner Hilfetext zu dieser Applikation in Asterisk
        1.4:</title>

        <para><screen>  -= Info about application 'DISA' =- 

[Synopsis]
DISA (Direct Inward System Access)

[Description]
DISA(&lt;numeric passcode&gt;[|&lt;context&gt;]) or DISA(&lt;filename&gt;)
The DISA, Direct Inward System Access, application allows someone from 
outside the telephone switch (PBX) to obtain an "internal" system 
dialtone and to place calls from it as if they were placing a call from 
within the switch.
DISA plays a dialtone. The user enters their numeric passcode, followed by
the pound sign (#). If the passcode is correct, the user is then given
system dialtone on which a call may be placed. Obviously, this type
of access has SERIOUS security implications, and GREAT care must be
taken NOT to compromise your security.

There is a possibility of accessing DISA without password. Simply
exchange your password with "no-password".

    Example: exten =&gt; s,1,DISA(no-password|local)

Be aware that using this compromises the security of your PBX.

The arguments to this application (in extensions.conf) allow either
specification of a single global passcode (that everyone uses), or
individual passcodes contained in a file. It also allows specification
of the context on which the user will be dialing. If no context is
specified, the DISA application defaults the context to "disa".
Presumably a normal system will have a special context set up
for DISA use with some or a lot of restrictions. 

The file that contains the passcodes (if used) allows specification
of either just a passcode (defaulting to the "disa" context, or
passcode|context on each line of the file. The file may contain blank
lines, or comments starting with "#" or ";". In addition, the
above arguments may have |new-callerid-string appended to them, to
specify a new (different) callerid to be used for this call, for
example: numeric-passcode|context|"My Phone" &lt;(234) 123-4567&gt; or 
full-pathname-of-passcode-file|"My Phone" &lt;(234) 123-4567&gt;.  Last
but not least, |mailbox[@context] may be appended, which will cause
a stutter-dialtone (indication "dialrecall") to be used, if the
specified mailbox contains any new messages, for example:
numeric-passcode|context||1234 (w/a changing callerid).  Note that
in the case of specifying the numeric-passcode, the context must be
specified if the callerid is specified also.

If login is successful, the application looks up the dialed number in
the specified (or default) context, and executes it if found.
If the user enters an invalid extension and extension "i" (invalid) 
exists in the context, it will be used. Also, if you set the 5th argument
to 'NOANSWER', the DISA application will not answer initially.</screen></para>
      </formalpara>

      <formalpara>
        <title>Differenz zum internen Hilfetext in Asterisk 1.2:</title>

        <para><screen>8c8
&lt; DISA(&lt;numeric passcode&gt;[|&lt;context&gt;]) or DISA(&lt;filename&gt;)
---
&gt; DISA(&lt;numeric passcode&gt;[|&lt;context&gt;]) or disa(&lt;filename&gt;)
28c28
&lt; individual passcodes contained in a file. It also allows specification
---
&gt; individual passcodes contained in a file. It also allow specification
52,53c52
&lt; exists in the context, it will be used. Also, if you set the 5th argument
&lt; to 'NOANSWER', the DISA application will not answer initially.
---
&gt; exists in the context, it will be used.</screen></para>
      </formalpara>
    </note>
</section>
