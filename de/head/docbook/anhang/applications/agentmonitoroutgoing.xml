<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
"http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd">
<section id="applications-agentmonitoroutgoing" lang="de" revision="$Revision$">
  <!--
% Copyright (c) 2006 - 2008 by 
% Stefan Wintermeyer <stefan.wintermeyer@amooma.de>
% Philipp Kempgen <philipp.kempgen@amooma.de>
% Permission is granted to copy, distribute and/or modify this document
% under the terms of the GNU Free Documentation License, Version 1.2
% or any later version published by the Free Software Foundation
% with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
% Texts. A copy of the license is included in the section entitled "GNU
% Free Documentation License".
% Asterisk training and consulting is offered at http://www.amooma.de
-->

    <title><literal>AgentMonitorOutgoing()</literal></title>

    <indexterm significance="preferred">
      <primary>Dialplan-Applikationen</primary>

      <secondary><code>AgentMonitorOutgoing()</code></secondary>
    </indexterm>

    <simpara>Speichert die ausgehenden Anrufe eines Agenten.</simpara>

    <synopsis>AgentMonitorOutgoing([<replaceable>Optionen</replaceable>])</synopsis>

    <simpara>Zeichnet alle ausgehenden Anrufe eines Agenten auf.</simpara>

    <simpara>Diese Anwendung versucht, die ID eines Agenten, der einen
    ausgehenden Anruf tätigt, herauszufinden, indem er die ID des Anrufers
    (Caller ID) des gegenwärtigen Interfaces mit einer von der
    <code>AgentCallbackLogin()</code>-Anwendung gesetzten globalen Variablen
    vergleicht. Daher wird dringend empfohlen, diese Anwendung nur in
    Verbindung mit der <code>AgentCallbackLogin()</code>-Anwendung (und zwar
    nach dieser!) zu verwenden. Um die Anrufe aufzuzeichnen, werden anstelle
    der Anwendung Monitor() die Überwachungsfunktionen des
    <code>chan_agent</code>-Moduls benutzt. Deshalb muss das Aufzeichnen der
    Anrufe in der <filename>agents.conf</filename>-Datei korrekt konfiguriert
    sein.</simpara>

    <simpara>Standardmäßig werden aufgezeichnete Anrufe im Verzeichnis
    <filename>/var/spool/asterisk/monitor/</filename> abgelegt. Diese
    Einstellung kann durch Anpassung des Parameters <code>savecallsin</code>
    in der Datei <filename>agents.conf</filename> überschrieben werden. Bitte
    seien sie sich bewusst, dass die Speicherung von Telefonaten dem
    Datenschutz und der Wahrung von Persönlichkeitsrechten unterliegen. Sie
    sollten sich genau darüber informieren, wann und wie sie Telefonate
    aufzeichnen dürfen. Als allgemeine Regel gilt, dass sie ohne Wissen und
    Einverständnis der Teilnehmer kein Telefonat aufzeichnen dürfen.</simpara>

    <simpara>Können die ID des Anrufers (caller id) und/oder die ID des
    Agenten (agent id) nicht ermittelt werden, wird diese Anwendung zur
    Priorität n+101 springen, falls diese existiert.</simpara>

    <simpara>Falls keine der folgenden Optionen anderes bewirkt, liefert die
    Anwendung 0 zurück.</simpara>

    <simpara>Der <code>Optionen</code>-Parameter kann aus einem oder mehreren
    der folgenden Optionen zusammengesetzt sein.</simpara>

    <variablelist termlength="2">
      <varlistentry>
        <term><code>d</code></term>

        <listitem>
          <simpara>Zwingt die Anwendung zur Rückgabe von -1, falls ein Fehler
          vorliegt und keine Priorität n+101 existiert.</simpara>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><code>c</code></term>

        <listitem>
          <simpara>Ändert den Call Detail Record dahingehend, dass
          <code><replaceable>Agent</replaceable>/<replaceable>AgentenNr</replaceable></code>
          als Channel, von dem der Anruf ausgeht, gespeichert wird, damit
          festgestellt werden kann, von welchem Agenten der Anruf
          ausging.</simpara>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><code>n</code></term>

        <listitem>
          <simpara>Unterdrückt Warnmeldungen im Falle, dass Caller-ID bzw.
          Agent-ID unbekannt sind. Diese Option ist hilfreich, wenn ein
          gemeinsamer Context für Agenten- und Nicht-Agenten-Anrufe erwünscht
          ist.</simpara>
        </listitem>
      </varlistentry>
    </variablelist>

    <programlisting>; ausgehende Anrufe dieses Agenten aufzeichnen, und den CDR
; entsprechend anpassen:
exten =&gt; 123,1,AgentMonitorOutgoing(c)</programlisting>

    <xi:include href="agentmonitoroutgoing-help.xml" parse="xml" xmlns:xi="http://www.w3.org/2001/XInclude" xpointer="xpointer(/note/*)" />

    <formalpara>
      <title>Siehe auch</title>

      <para><xref linkend="applications-agentcallbacklogin" />,
      <filename>agents.conf</filename>, <xref
      linkend="applications-monitor" />, <xref
      linkend="applications-chanspy" /></para>
    </formalpara>
</section>
