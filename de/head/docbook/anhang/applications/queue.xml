<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
"http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd">
<section id="applications-queue" revision="$Revision$">

    <title><literal>Queue()</literal></title>

    <indexterm significance="preferred">
      <primary>Dialplan-Applikationen</primary>

      <secondary><code>Queue()</code></secondary>
    </indexterm>

    <simpara>Legt den aktuellen Anruf in der spezifizierten Anrufwarteschlange
    ab.</simpara>

    <synopsis>Queue(<replaceable>Schlange</replaceable>[,<replaceable>Optionen</replaceable>[,<replaceable>URL</replaceable>[,<replaceable>Ankündigung</replaceable>[,<replaceable>Timeout</replaceable>]]]])</synopsis>

    <simpara>Fügt der angegebenen Warteschlange - wie in
    <filename>queues.conf</filename> definiert - einen eingehenden Anruf
    hinzu.</simpara>

    <para>Folgende Optionen sind möglich (auch in Kombination): <variablelist
        termlength="3">
        <varlistentry>
          <term><code>t</code></term>

          <listitem>
            <simpara>Erlaubt es dem angerufenen Teilnehmer, den Anruf
            weiterzuleiten.</simpara>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><code>T</code></term>

          <listitem>
            <simpara>Erlaubt es dem anrufenden Teilnehmer, den Anruf
            weiterzuleiten.</simpara>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><code>d</code></term>

          <listitem>
            <simpara>Spezifiziert einen Anruf mit Datenqualität (Modem,
            minimale Verzögerung).</simpara>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><code>h</code></term>

          <listitem>
            <simpara>Erlaubt es dem Angerufenen, durch Drücken von
            <code>*</code> aufzulegen.</simpara>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><code>H</code></term>

          <listitem>
            <simpara>Erlaubt es dem Anrufer, durch Drücken von <code>*</code>
            aufzulegen.</simpara>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><code>n</code></term>

          <listitem>
            <simpara>Verbietet eine Wiederholung des Timeouts; beendet diese
            Anwendung und geht weiter zum nächsten Schritt.</simpara>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><code>r</code></term>

          <listitem>
            <simpara>Klingelt, statt Wartemusik zu spielen.</simpara>
          </listitem>
        </varlistentry>
      </variablelist></para>

    <simpara>Außer dass ein Anruf weitergeleitet werden kann, kann er auch
    geparkt und dann von einem anderen Teilnehmer aufgenommen
    werden.</simpara>

    <simpara>Der Parameter <code>Ankündigung</code> überschreibt die
    Standardankündigung, die Warteschlangenagenten vorgespielt wird, bevor sie
    den angegebenen Anruf beantworten.</simpara>

    <simpara>Die optionale <code>URL</code> wird dem angerufenen Teilnehmer
    übersendet, falls dies vom Channel unterstützt wird.</simpara>

    <simpara>Nach einer angegebenen Zahl von Sekunden, überprüft zwischen
    jedem <filename>queues.conf</filename> Timeout und Retry-Kreislauf, wird
    <code>Timeout</code> die Queue() zu einem Fehlschlagen zwingen.</simpara>

    <simpara>Liefert -1 zurück, falls der ursprüngliche Channel aufgelegt
    wird, oder falls der Anruf durchgestellt wird und einer der Teilnehmer den
    Anruf beendet. Ist die Warteschlange voll, existiert sie nicht oder hat
    sie keine Mitglieder, wird 0 zurückgeliefert.</simpara>

    <programlisting>; den Anrufer zur "supportschlange" hinzufügen:
exten =&gt; 123,1,Answer()
exten =&gt; 123,n,Queue(supportschlange,t)</programlisting>

    <note>
      <formalpara>
        <title>Interner Hilfetext zu dieser Applikation in Asterisk
        1.4:</title>

        <para><screen>  -= Info about application 'Queue' =- 

[Synopsis]
Queue a call for a call queue

[Description]
  Queue(queuename[|options[|URL][|announceoverride][|timeout][|AGI]):
Queues an incoming call in a particular call queue as defined in queues.conf.
This application will return to the dialplan if the queue does not exist, or
any of the join options cause the caller to not enter the queue.
The option string may contain zero or more of the following characters:
      'd' -- data-quality (modem) call (minimum delay).
      'h' -- allow callee to hang up by hitting *.
      'H' -- allow caller to hang up by hitting *.
      'n' -- no retries on the timeout; will exit this application and 
             go to the next step.
      'i' -- ignore call forward requests from queue members and do nothing
             when they are requested.
      'r' -- ring instead of playing MOH
      't' -- allow the called user transfer the calling user
      'T' -- to allow the calling user to transfer the call.
      'w' -- allow the called user to write the conversation to disk via Monitor
      'W' -- allow the calling user to write the conversation to disk via Monitor
  In addition to transferring the call, a call may be parked and then picked
up by another user.
  The optional URL will be sent to the called party if the channel supports
it.
  The optional AGI parameter will setup an AGI script to be executed on the 
calling party's channel once they are connected to a queue member.
  The timeout will cause the queue to fail out after a specified number of
seconds, checked between each queues.conf 'timeout' and 'retry' cycle.
  This application sets the following channel variable upon completion:
      QUEUESTATUS    The status of the call as a text string, one of
             TIMEOUT | FULL | JOINEMPTY | LEAVEEMPTY | JOINUNAVAIL | LEAVEUNAVAIL</screen></para>
      </formalpara>

      <formalpara>
        <title>Differenz zum internen Hilfetext in Asterisk 1.2:</title>

        <para><screen>8c8
&lt;   Queue(queuename[|options[|URL][|announceoverride][|timeout][|AGI]):
---
&gt;   Queue(queuename[|options[|URL][|announceoverride][|timeout]]):
17,19c17
&lt;              go to the next step.
&lt;       'i' -- ignore call forward requests from queue members and do nothing
&lt;              when they are requested.
---
&gt;        go to the next step.
29,30d26
&lt;   The optional AGI parameter will setup an AGI script to be executed on the 
&lt; calling party's channel once they are connected to a queue member.</screen></para>
      </formalpara>
    </note>

    <formalpara>
      <title>Siehe auch</title>

      <para><xref linkend="applications-queuelog" />, <xref
      linkend="warteschleifen" /></para>
    </formalpara>
  
</section>
