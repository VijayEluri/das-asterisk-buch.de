<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
"http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd">
<section id="applications-parkandannounce" revision="$Revision$">

    <title><code>ParkAndAnnounce()</code></title>

    <indexterm significance="preferred">
      <primary>Dialplan-Applikationen</primary>

      <secondary><code>ParkAndAnnounce()</code></secondary>
    </indexterm>

    <simpara>Parkt den aktuellen Anruf und macht ihn über den spezifizierten
    Channel bekannt.</simpara>

    <synopsis>ParkAndAnnounce(<replaceable>Template</replaceable>,<replaceable>Timeout</replaceable>,<replaceable>Channel</replaceable>[,<replaceable>Return-Context</replaceable>])</synopsis>

    <simpara>Parkt den aktuellen Anruf in dem dafür vorgesehenen Bereich (auf
    dem Parkplatz) und meldet ihn über den spezifizierten Channel.
    <code>Template</code> bezeichnet eine Liste von durch Kommas voneinander
    getrennten Dateien, die anzukündigen sind; das Wort <code>PARKED</code>
    wird durch die Parkplatznummer des Anrufs ersetzt. Der Parameter
    <code>Timeout</code> bestimmt die Zeit in Sekunden, nach deren Ablauf der
    Anruf zum <code>Return-Context</code> zurückkehrt. <code>Channel</code>
    bezeichnet den Channel, der anzurufen ist, um die Ankündigung zu machen
    (<code>Console/dsp</code> ruft die Konsole auf).
    <code>Return-Context</code> ist ein Label im <code>GoTo()</code>-Stil, um
    den Anruf nach der Beendigung zurückzubringen. Standardeinstellung hierfür
    ist n+1 im Context <code>Return-Context</code>.</simpara>

    <programlisting>include =&gt; parkedcalls
exten =&gt; 123,1,Answer()
exten =&gt; 123,n,ParkAndAnnounce(vm-youhave:a:pbx-transfer:at:vm-extension:PARKED,120,Console/dsp)
exten =&gt; 123,n,Playback(vm-nobodyavail)
exten =&gt; 123,n,Playback(vm-goodbye)
exten =&gt; 123,n,Hangup()</programlisting>

    <note>
      <formalpara>
        <title>Interner Hilfetext zu dieser Applikation in Asterisk
        1.4:</title>

        <para><screen>  -= Info about application 'ParkAndAnnounce' =- 

[Synopsis]
Park and Announce

[Description]
  ParkAndAnnounce(announce:template|timeout|dial|[return_context]):
Park a call into the parkinglot and announce the call to another channel.

announce template: Colon-separated list of files to announce.  The word PARKED
                   will be replaced by a say_digits of the extension in which
                   the call is parked.
timeout:           Time in seconds before the call returns into the return
                   context.
dial:              The app_dial style resource to call to make the
                   announcement.  Console/dsp calls the console.
return_context:    The goto-style label to jump the call back into after
                   timeout.  Default &lt;priority+1&gt;.

The variable ${PARKEDAT} will contain the parking extension into which the
call was placed.  Use with the Local channel to allow the dialplan to make
use of this information.</screen></para>
      </formalpara>

      <formalpara>
        <title>Differenz zum internen Hilfetext in Asterisk 1.2:</title>

        <para><screen>9,23c9,14
&lt; Park a call into the parkinglot and announce the call to another channel.
&lt; 
&lt; announce template: Colon-separated list of files to announce.  The word PARKED
&lt;                    will be replaced by a say_digits of the extension in which
&lt;                    the call is parked.
&lt; timeout:           Time in seconds before the call returns into the return
&lt;                    context.
&lt; dial:              The app_dial style resource to call to make the
&lt;                    announcement.  Console/dsp calls the console.
&lt; return_context:    The goto-style label to jump the call back into after
&lt;                    timeout.  Default &lt;priority+1&gt;.
&lt; 
&lt; The variable ${PARKEDAT} will contain the parking extension into which the
&lt; call was placed.  Use with the Local channel to allow the dialplan to make
&lt; use of this information.
---
&gt; Park a call into the parkinglot and announce the call over the console.
&gt; announce template: colon separated list of files to announce, the word PARKED
&gt;                    will be replaced by a say_digits of the ext the call is parked in
&gt; timeout: time in seconds before the call returns into the return context.
&gt; dial: The app_dial style resource to call to make the announcement. Console/dsp calls the console.
&gt; return_context: the goto style label to jump the call back into after timeout. default=prio+1</screen></para>
      </formalpara>
    </note>

    <formalpara>
      <title>Siehe auch</title>

      <para><xref linkend="applications-park" />, <xref
      linkend="applications-parkedcall" /></para>
    </formalpara>
  
</section>
