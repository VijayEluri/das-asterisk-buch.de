<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
"http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd">
<section id="applications-voicemail" revision="$Revision$">

    <title><literal>VoiceMail()</literal></title>

    <indexterm significance="preferred">
      <primary>Dialplan-Applikationen</primary>

      <secondary><code>VoiceMail()</code></secondary>
    </indexterm>

    <simpara>Hinterlässt eine Voicemail-Nachricht in der angegebenen
    Mailbox.</simpara>

    <synopsis>VoiceMail(<replaceable>Mailbox</replaceable>[@<replaceable>Context</replaceable>][&amp;<replaceable>Mailbox</replaceable>[@<replaceable>Context</replaceable>][&amp;<replaceable>...</replaceable>]],<replaceable>Optionen</replaceable>)</synopsis>

    <para>alte Syntax:<synopsis>VoiceMail([s|u|b]<replaceable>Mailbox</replaceable>[@<replaceable>Context</replaceable>][&amp;<replaceable>Mailbox</replaceable>[@<replaceable>Context</replaceable>][&amp;<replaceable>...</replaceable>]])</synopsis></para>

    <simpara>Erlaubt dem Anrufer, in der angegebenen Mailbox eine
    Voicemail-Nachricht zu hinterlassen. Die Mailbox muss in
    <filename>voicemail.conf</filename> konfiguriert sein. Sind mehrere
    Mailboxen aufgelistet, wird die Begrüßung der ersten gespielt. Wenn die
    Mailbox nicht existiert, wird die Ausführung des Dialplans
    abgebrochen.</simpara>

    <simpara>Mit der Option <code>s</code> (silent) werden die Anweisungen zum
    Hinterlassen der Nachricht übersprungen. Mit <code>u</code> (unavailable)
    wird die Nicht-verfügbar-Nachricht abgespielt, falls vorhanden. Bei
    <code>b</code> (busy) wird die Besetzt-Nachricht gespielt (Datei
    <filename>busy</filename> statt <filename>unavail</filename>).</simpara>

    <simpara>Mit <code>j</code> wird bei einem Fehler zur Extension n+101
    gesprungen, wenn vorhanden.</simpara>

    <simpara>Drückt der Teilnehmer während der Eingabeaufforderung
    <code>0</code> (Null), geht der Anruf zur Extension <code>o</code>
    (kleiner Buchstabe o, Operator) im aktuellen Context über.</simpara>

    <simpara>Drückt der Teilnehmer während der Eingabeaufforderung
    <code>*</code>, geht der Anruf zur Extension <code>a</code> (Assistant) im
    aktuellen Context über.</simpara>

    <simpara>Gibt im Falle eines Fehlers, falls die Mailbox nicht gefunden
    wird oder der Teilnehmer auflegt -1 zurück, sonst 0. Setzt die
    Channelvariable <code>VMSTATUS</code> auf <code>SUCCESS</code> (Erfolg),
    <code>USEREXIT</code> (Abbruch durch Anrufer) oder <code>FAILED</code>
    (Fehler).</simpara>

    <programlisting>; den Anrufer zur Mailbox 123 leiten, mit Nicht-erreichbar-Nachricht:
exten =&gt; 123,1,VoiceMail(123,u)</programlisting>

    <note>
      <formalpara>
        <title>Interner Hilfetext zu dieser Applikation in Asterisk
        1.4:</title>

        <para><screen>  -= Info about application 'VoiceMail' =- 

[Synopsis]
Leave a Voicemail message

[Description]
  VoiceMail(mailbox[@context][&amp;mailbox[@context]][...][|options]): This
application allows the calling party to leave a message for the specified
list of mailboxes. When multiple mailboxes are specified, the greeting will
be taken from the first mailbox specified. Dialplan execution will stop if the
specified mailbox does not exist.
  The Voicemail application will exit if any of the following DTMF digits are
received:
    0 - Jump to the 'o' extension in the current dialplan context.
    * - Jump to the 'a' extension in the current dialplan context.
  This application will set the following channel variable upon completion:
    VMSTATUS - This indicates the status of the execution of the VoiceMail
               application. The possible values are:
               SUCCESS | USEREXIT | FAILED

  Options:
    b    - Play the 'busy' greeting to the calling party.
    g(#) - Use the specified amount of gain when recording the voicemail
           message. The units are whole-number decibels (dB).
    s    - Skip the playback of instructions for leaving a message to the
           calling party.
    u    - Play the 'unavailble greeting.
    j    - Jump to priority n+101 if the mailbox is not found or some other
           error occurs.</screen></para>
      </formalpara>

      <formalpara>
        <title>Differenz zum internen Hilfetext in Asterisk 1.2:</title>

        <para><screen>28c28
&lt;     u    - Play the 'unavailble greeting.
---
&gt;     u    - Play the 'unavailable greeting.</screen></para>
      </formalpara>
    </note>

    <formalpara>
      <title>Siehe auch</title>

      <para><xref linkend="applications-voicemailmain" />,
      <filename>voicemail.conf</filename></para>
    </formalpara>
  
</section>
