<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
"http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd">
<section id="applications-meetme" revision="$Revision$">
    <title><literal>MeetMe()</literal></title>

    <indexterm significance="preferred">
      <primary>Dialplan-Applikationen</primary>

      <secondary><code>MeetMe()</code></secondary>
    </indexterm>

    <simpara>Nimmt den Anrufer in eine MeetMe-Konferenz auf.</simpara>

    <synopsis>MeetMe([<replaceable>KonferenzNr</replaceable>][,<replaceable>Optionen</replaceable>[,<replaceable>PIN</replaceable>]])</synopsis>

    <simpara>Verbindet den Anrufer auf dem aktuellen Channel zu einer
    MeetMe-Konferenz, angegeben durch den Parameter <code>KonferenzNr</code>.
    Ohne Angabe der Konferenznummer wird der Teilnehmer zur Eingabe derselben
    aufgefordert.</simpara>

    <simpara>Wird als <code>PIN</code>-Parameter die PIN-Nummer der Konferenz
    (statisch in <filename>meetme.conf</filename> oder dynamisch vom Ersteller
    festgelegt) übergeben, so wird der Anrufer direkt in die Konferenz
    geleitet. Ansonsten muss der Anrufer die PIN eingeben, um beitreten zu
    können.</simpara>

    <important>
      <simpara>Damit MeetMe-Konferenzen funktionieren, muss ein passendes
      Zaptel-Interface installiert sein. Alternativ kann auch der
      <code>ztdummy</code>-Treiber für Timing-Zwecke verwendet
      werden.</simpara>
    </important>

    <simpara>Die <code>Optionen</code> können sich aus folgenden Zeichen
    zusammensetzen:</simpara>

    <variablelist termlength="3">
      <varlistentry>
        <term><code>a</code></term>

        <listitem>
          <simpara>Aktiviert den Administrator-Modus.</simpara>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><code>A</code></term>

        <listitem>
          <simpara>Markiert den eintretenden User als besonderen Teilnehmer
          (siehe <code>w</code> und <code>x</code>).</simpara>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><code>b</code></term>

        <listitem>
          <simpara>Startet das in <code>${MEETME_AGI_BACKGROUND}</code>
          spezifizierte AGI-Skript, standardmäßig
          <filename>conf-background.agi</filename>. (Funktioniert nur dann
          korrekt, wenn alle Kanäle in einer Konferenz Zap-Kanäle sind.) Das
          Skript erhält alle DTMF-Tanstendrücke, wodurch die Kombination mit
          Optionen, die auch das Abfangen von Tasten zur Folge haben
          (<code>p</code>), nicht möglich ist.</simpara>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><code>c</code></term>

        <listitem>
          <simpara>Kündigt beim Betreten die Zahl der Teilnehmer an.</simpara>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><code>d</code></term>

        <listitem>
          <simpara>Legt dynamisch einen neuen Konferenzraum an.</simpara>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><code>D</code></term>

        <listitem>
          <simpara>Legt dynamisch einen neuen Konferenzraum an, wobei die
          Festlegung der PIN verlangt wird. (Wenn der User keine PIN will,
          muss er <code>#</code> drücken.)</simpara>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><code>e</code></term>

        <listitem>
          <simpara>Wählt eine leere Konferenz aus.</simpara>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><code>E</code></term>

        <listitem>
          <simpara>Wählt eine leere Konferenz aus, die keine PIN
          verlangt.</simpara>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><code>i</code></term>

        <listitem>
          <simpara>Kündigt Betreten oder Verlassen eines Teilnehmers an (nur
          mit Zap-Kanälen).</simpara>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><code>m</code></term>

        <listitem>
          <simpara>Aktiviert den Monitor-Modus (nur hören, nicht
          sprechen).</simpara>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><code>M</code></term>

        <listitem>
          <simpara>Aktiviert Wartemusik (Music on Hold), wenn nur ein
          Teilnehmer in der Konferenz ist.</simpara>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><code>p</code></term>

        <listitem>
          <simpara>Ermöglicht es dem Teilnehmer, die Konferenz durch Drücken
          von <code>#</code> zu verlassen.</simpara>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><code>P</code></term>

        <listitem>
          <simpara>Fragt immer nach der PIN, auch wenn sie hier im Befehl
          angegeben ist.</simpara>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><code>q</code></term>

        <listitem>
          <simpara>Aktiviert den ruhigen Modus (spielt keine
          Eintritts-/Austrittsklänge ab).</simpara>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><code>r</code></term>

        <listitem>
          <simpara>Zeichnet eine Konferenz auf. Datei:
          <code>${MEETME_RECORDINGFILE}</code>, Format:
          <code>${MEETME_RECORDINGFORMAT}</code>. Der Standard-Dateiname
          lautet
          <code>meetme-conf-rec-${<replaceable>KonferenzNr</replaceable>}-${<replaceable>UniqueID</replaceable>}</code>,
          wobei <code>UniqueID</code> eine einmalige ID ist. Das
          Standardformat ist <code>wav</code>. (Funktioniert nur mit
          Zap-Kanälen)</simpara>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><code>s</code></term>

        <listitem>
          <simpara>Wechselt beim Drücken von <code>*</code> ins (Teilnehmer-
          oder Administrator-)Menü.</simpara>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><code>t</code></term>

        <listitem>
          <simpara>Aktiviert den Nur-Sprechen-Modus (nur reden, nicht
          hören).</simpara>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><code>T</code></term>

        <listitem>
          <simpara>Aktiviert die Sprecher-Erkennung (wird zum
          Manager-Inferface gesendet und in der MeetMe-Liste im CLI
          angezeigt).</simpara>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><code>v</code></term>

        <listitem>
          <simpara>Aktiviert den Video-Modus (bisher ohne Funktion).</simpara>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><code>w</code></term>

        <listitem>
          <simpara>Wartet, bis ein gekennzeichneter Teilnehmer (siehe
          <code>A</code>) die Konferenz betritt. Bis dahin hören alle
          Teilnehmer Wartemusik.</simpara>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><code>x</code></term>

        <listitem>
          <simpara>Schließt die Konferenz, wenn sie vom letzten
          gekennzeichneten Teilnehmer (siehe <code>A</code>) verlassen
          wird.</simpara>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><code>X</code></term>

        <listitem>
          <simpara>Ermöglicht es dem Teilnehmer, die Konferenz durch Eingabe
          einer einziffrigen Extension im Context
          <code>${MEETME_EXIT_CONTEXT}</code> zu verlassen, oder durch Eingabe
          der Nummer einer Extension des aktuellen Contexts, falls diese
          Variable nicht definiert ist.</simpara>
        </listitem>
      </varlistentry>
    </variablelist>

    <simpara>Die Option <code>X</code> funktioniert nicht zusammen mit
    <code>p</code> oder <code>s</code>.</simpara>

    <simpara>Verwenden Sie <code>e</code> (oder <code>E</code>) zusammen mit
    <code>d</code> (oder <code>D</code>), um dynamisch einen neuen
    Konferenzraum zu eröffnen, wobei Asterisk automatisch die
    <code>KonferenzNr</code> festlegt. Sie müssen dann natürlich den anderen
    Teilnehmern die Nummer mitteilen oder entsprechende Dialplan-Logik
    einsetzen.</simpara>

    <note>
      <para>Mit <code>d</code> oder <code>D</code> werden
      <emphasis>dynamisch</emphasis> Konferenzräume angelegt, in der
      <filename>meetme.conf</filename> können sie
      <emphasis>statisch</emphasis> definiert werden.</para>
    </note>

    <programlisting>exten =&gt; 123,1,Answer()
; den Anrufer in Konferenzraum 333 schicken (mit der PIN 1234):
exten =&gt; 123,n,MeetMe(333,DpM,1234)</programlisting>

    <formalpara>
      <title>Siehe auch</title>

      <para><xref linkend="applications-meetmeadmin" />, <xref
      linkend="applications-meetmecount" /></para>
    </formalpara>

    <formalpara>
      <title>Befehle im CLI</title>

      <para>Diese Befehle stehen im CLI zur Verfügung, um MeetMe-Konferenzen
      zu verwalten (dabei ist die <code>TeilnehmerNr</code> die in der Liste
      angezeigte Nummer des Teilnehmers):<variablelist>
          <?dbfo list-presentation="blocks"?>

          <varlistentry>
            <term><code>MeetMe</code></term>

            <listitem>
              <simpara>Listet alle Konferenzen auf.</simpara>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term><code>MeetMe list
            <replaceable>KonferenzNr</replaceable></code></term>

            <listitem>
              <simpara>Listet die Teilnehmer einer Konferenz auf.</simpara>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term><code>MeetMe kick <replaceable>KonferenzNr</replaceable>
            <replaceable>TeilnehmerNr</replaceable></code></term>

            <listitem>
              <simpara>Wirft einen Teilnehmer aus der Konferenz.</simpara>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term><code>MeetMe kick
            <replaceable>KonferenzNr</replaceable></code></term>

            <listitem>
              <simpara>Wirft alle Teilnehmer aus der Konferenz.</simpara>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term><code>MeetMe lock
            <replaceable>KonferenzNr</replaceable></code></term>

            <listitem>
              <simpara>Sperrt eine Konferenz, so dass keine Teilnehmer mehr
              aufgenommen werden.</simpara>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term><code>MeetMe unlock
            <replaceable>KonferenzNr</replaceable></code></term>

            <listitem>
              <simpara>Hebt eine Konferenz-Sperre (s.o.) wieder auf.</simpara>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term><code>MeetMe mute <replaceable>KonferenzNr</replaceable>
            <replaceable>TeilnehmerNr</replaceable></code></term>

            <listitem>
              <simpara>Schaltet einen Teilnehmer stumm.</simpara>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term><code>MeetMe unmute <replaceable>KonferenzNr</replaceable>
            <replaceable>TeilnehmerNr</replaceable></code></term>

            <listitem>
              <simpara>Hebt die Stummschaltung eines Teilnehmers (s.o.) wieder
              auf.</simpara>
            </listitem>
          </varlistentry>
        </variablelist></para>
    </formalpara>

    <note>
      <formalpara>
        <title>Interner Hilfetext zu dieser Applikation in Asterisk
        1.4:</title>

        <para><screen>  -= Info about application 'MeetMe' =- 

[Synopsis]
MeetMe conference bridge

[Description]
  MeetMe([confno][,[options][,pin]]): Enters the user into a specified MeetMe
conference.  If the conference number is omitted, the user will be prompted
to enter one.  User can exit the conference by hangup, or if the 'p' option
is specified, by pressing '#'.
Please note: The Zaptel kernel modules and at least one hardware driver (or ztdummy)
             must be present for conferencing to operate properly. In addition, the chan_zap
             channel driver must be loaded for the 'i' and 'r' options to operate at all.

The option string may contain zero or more of the following characters:
      'a' -- set admin mode
      'A' -- set marked mode
      'b' -- run AGI script specified in ${MEETME_AGI_BACKGROUND}
             Default: conf-background.agi  (Note: This does not work with
             non-Zap channels in the same conference)
      'c' -- announce user(s) count on joining a conference
      'd' -- dynamically add conference
      'D' -- dynamically add conference, prompting for a PIN
      'e' -- select an empty conference
      'E' -- select an empty pinless conference
      'i' -- announce user join/leave with review
      'I' -- announce user join/leave without review
      'l' -- set listen only mode (Listen only, no talking)
      'm' -- set initially muted
      'M' -- enable music on hold when the conference has a single caller
      'o' -- set talker optimization - treats talkers who aren't speaking as
             being muted, meaning (a) No encode is done on transmission and
             (b) Received audio that is not registered as talking is omitted
             causing no buildup in background noise
      'p' -- allow user to exit the conference by pressing '#'
      'P' -- always prompt for the pin even if it is specified
      'q' -- quiet mode (don't play enter/leave sounds)
      'r' -- Record conference (records as ${MEETME_RECORDINGFILE}
             using format ${MEETME_RECORDINGFORMAT}). Default filename is
             meetme-conf-rec-${CONFNO}-${UNIQUEID} and the default format is
             wav.
      's' -- Present menu (user or admin) when '*' is received ('send' to menu)
      't' -- set talk only mode. (Talk only, no listening)
      'T' -- set talker detection (sent to manager interface and meetme list)
      'w[(&lt;secs&gt;)]'
          -- wait until the marked user enters the conference
      'x' -- close the conference when last marked user exits
      'X' -- allow user to exit the conference by entering a valid single
             digit extension ${MEETME_EXIT_CONTEXT} or the current context
             if that variable is not defined.
      '1' -- do not play message when first person enters</screen></para>
      </formalpara>

      <formalpara>
        <title>Differenz zum internen Hilfetext in Asterisk 1.2:</title>

        <para><screen>8,11c8,11
&lt;   MeetMe([confno][,[options][,pin]]): Enters the user into a specified MeetMe
&lt; conference.  If the conference number is omitted, the user will be prompted
&lt; to enter one.  User can exit the conference by hangup, or if the 'p' option
&lt; is specified, by pressing '#'.
---
&gt;   MeetMe([confno][,[options][,pin]]): Enters the user into a specified MeetMe conference.
&gt; If the conference number is omitted, the user will be prompted to enter
&gt; one. 
&gt; User can exit the conference by hangup, or if the 'p' option is specified, by pressing '#'.
20,21c20,21
&lt;              Default: conf-background.agi  (Note: This does not work with
&lt;              non-Zap channels in the same conference)
---
&gt;              Default: conf-background.agi
&gt;              (Note: This does not work with non-Zap channels in the same conference)
27,30c27,28
&lt;       'i' -- announce user join/leave with review
&lt;       'I' -- announce user join/leave without review
&lt;       'l' -- set listen only mode (Listen only, no talking)
&lt;       'm' -- set initially muted
---
&gt;       'i' -- announce user join/leave
&gt;       'm' -- set monitor only mode (Listen only, no talking)
32,35d29
&lt;       'o' -- set talker optimization - treats talkers who aren't speaking as
&lt;              being muted, meaning (a) No encode is done on transmission and
&lt;              (b) Received audio that is not registered as talking is omitted
&lt;              causing no buildup in background noise
41,42c35
&lt;              meetme-conf-rec-${CONFNO}-${UNIQUEID} and the default format is
&lt;              wav.
---
&gt;              meetme-conf-rec-${CONFNO}-${UNIQUEID} and the default format is wav.
52d44
&lt;       '1' -- do not play message when first person enters</screen></para>
      </formalpara>
    </note>
</section>
