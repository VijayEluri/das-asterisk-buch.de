<?xml version="1.0" encoding="UTF-8"?>
<section id="installation-1.4-knoppix-5.1" lang="de"
         revision="$Revision:473 $">
  <!--% Copyright (c) 2006 - 2008 by 
% Stefan Wintermeyer <sw@amooma.de>
% Permission is granted to copy, distribute and/or modify this document
% under the terms of the GNU Free Documentation License, Version 1.2
% or any later version published by the Free Software Foundation;
% with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
% Texts. A copy of the license is included in the section entitled "GNU
% Free Documentation License".
% Asterisk training and consulting is offered at http://www.amooma.de-->

  <title>Installation Asterisk 1.4.x auf Knoppix 5.1</title>

  <indexterm>
    <primary>Asterisk 1.4 Installation</primary>

    <secondary>Knoppix</secondary>
  </indexterm>

  <para>Die hier aufgeführte Installationsanleitung ist für ein einfaches
  Asterisk-System mit grundlegenden Features. Für Funktionen wie ISDN-Support
  oder Telefonkonferenzen ist die <link
  linkend="installation-1.4-debian-4.0">Standardinstallation auf einem Debian
  Linux</link> besser geeignet. Die hier aufgeführte Installation reicht aber
  aus, um ein Gefühl für das System zu bekommen und um die Programmierbasics
  im Dialplan zu lernen.</para>

  <note>
    <para>Bitte beachten Sie, das Knoppix ein <ulink
    url="???">Live-System</ulink>, das direkt von der CD gebootet wird und
    keine Daten auf die Festplatte schreibt. So können Sie gefahrlos mit
    Asterisk experimentieren. Allerdings sollten sie vor dem Runterfahren des
    Rechners Ihre Konfigurationen auf einem externen Medium (z.B. einem
    USB-Stick) sichern. Mehr Informationen zu Knoppix finden Sie auf <ulink
    url="http://de.wikipedia.org/wiki/Knoppix">http://de.wikipedia.org/wiki/Knoppix</ulink>
    und natürlich auf der <ulink url="http://www.knoppix.net/">Knoppix
    Homepage</ulink>.</para>
  </note>

  <para>Bitte booten Sie Ihr System mit einer Knoppix 5.1 CD. ISO Images
  dieser CD finden Sie auf einem der Knoppix Mirrors (siehe <ulink
  url="http://knopper.net/knoppix-mirrors/index-en.html">http://knopper.net/knoppix-mirrors/index-en.html</ulink>).
  </para>

  <para><emphasis>Bitte loggen Sie sich nach der Installation als Benutzer
  knoppix am System an (das geschieht automatisch) und führen Sie danach in
  einem Terminal Fenster den Befehl <command>sudo bash</command> aus, um eine
  Root Shell zu bekommen. Alle hier angegebenen Befehle werden mit dem
  Benutzer root ausgeführt.</emphasis><screen>knoppix@Knoppix:~$ sudo bash
root@Knoppix:~# </screen></para>

  <para>Als erstes wechseln wir mit <command>cd /usr/src</command> in das
  Verzeichnis <filename>/usr/src</filename><screen>root@Knoppix:~# cd /usr/src/
root@Knoppix:/usr/src# </screen></para>

  <para>Auf der Asterisk-Homepage <ulink
  url="http://www.asterisk.org/"><citetitle>http://www.asterisk.org/</citetitle></ulink>
  finden Sie die notwendigen Quellen, um Asterisk zu mit allen sinnvollen
  Extras zu installieren. Nehmen Sie bitte eine <emphasis
  role="bold">stabile</emphasis> und keine Entwickler-Version und laden Sie
  diese mit <command>wget
  http://downloads.digium.com/pub/asterisk/asterisk-1.4-current.tar.gz</command>
  in das Verzeichnis <filename>/usr/src/</filename> herunter:</para>

  <screen>root@Knoppix:/usr/src# wget http://downloads.digium.com/pub/asterisk/asterisk-1.4-current.tar.gz
--17:34:09--  http://downloads.digium.com/pub/asterisk/asterisk-1.4-current.tar.gz
           =&gt; `asterisk-1.4-current.tar.gz'
Auflösen des Hostnamen »downloads.digium.com«.... 216.27.40.102
Verbindungsaufbau zu downloads.digium.com|216.27.40.102|:80... verbunden.
HTTP Anforderung gesendet, warte auf Antwort... 200 OK
Länge: 11.528.693 (11M) [application/x-gzip]

100%[====================================&gt;] 11.528.693   280.98K/s    ETA 00:00

17:34:45 (314.52 KB/s) - »asterisk-1.4-current.tar.gz« gespeichert [11528693/11528693]

root@Knoppix:/usr/src# </screen>

  <para>Die komprimierte Datei wird jetzt mit <command>tar xvzf
  asterisk-1.4-current.tar.gz</command> entpackt:<screen>root@Knoppix:/usr/src# tar xvzf asterisk-1.4-current.tar.gz
asterisk-1.4.21.2/
asterisk-1.4.21.2/res/
asterisk-1.4.21.2/res/.res_crypto.moduleinfo
asterisk-1.4.21.2/res/.res_smdi.makeopts
asterisk-1.4.21.2/res/.res_jabber.moduleinfo

[...]

asterisk-1.4.21.2/.version
asterisk-1.4.21.2/Makefile
asterisk-1.4.21.2/config.guess
root@Knoppix:/usr/src#  </screen></para>

  <remark>1.4 ist die erste Asterisk-Version, die den Unix/Linux üblichen
  autoconf-Mechanismus benutzt.</remark>

  <para><important>
      <para>Bitte beachten Sie das sich die folgenden Verzeichnisnamen
      natürlich mit aufsteigenden Versionsnummern im Laufe der Zeit verändern.
      Es liegt in der Natur einer Dokumentation, das diese Links nicht immer
      aktuell gehalten werden können.</para>
    </important></para>

  <para>Danach gehen wir mit <command>cd asterisk-1.4.21.2</command> in das
  Asterisk Verzeichnis und führen auch dort ein <command>./configure
  &amp;&amp; make &amp;&amp; make install</command> aus:<screen>root@Knoppix:/usr/src# cd asterisk-1.4.21.2 
root@Knoppix:/usr/src/asterisk-1.4.21.2# ./configure &amp;&amp; make &amp;&amp; make install
checking build system type... i686-pc-linux-gnu
checking host system type... i686-pc-linux-gnu
checking for gcc... gcc
checking for C compiler default output file name... a.out

[...]

if [ -f contrib/firmware/iax/iaxy.bin ] ; then \
  /usr/bin/install -c -m 644 contrib/firmware/iax/iaxy.bin /var/lib/asterisk/firmware/iax/iaxy.bin; \
 fi
 +---- Asterisk Installation Complete -------+
 +                                           +
 +    YOU MUST READ THE SECURITY DOCUMENT    +
 +                                           +
 + Asterisk has successfully been installed. +
 + If you would like to install the sample   +
 + configuration files (overwriting any      +
 + existing config files), run:              +
 +                                           +
 +               make samples                +
 +                                           +
 +-----------------  or ---------------------+
 +                                           +
 + You can go ahead and install the asterisk +
 + program documentation now or later run:   +
 +                                           +
 +              make progdocs                +
 +                                           +
 + **Note** This requires that you have      +
 + doxygen installed on your local system    +
 +-------------------------------------------+
root@Knoppix:/usr/src/asterisk-1.4.21.2#</screen></para>

  <para>Die eben kompilierten Programmdateien sind jetzt auf dem System
  installiert. Allerdings finden wir im Asterisk-Konfigurationsverzeichnis
  <filename>/etc/asterisk/</filename> noch gähnende Leere vor. In diesem
  Verzeichnis liegen die Konfigurationsdateien von Asterisk und da wir nicht
  von Null beginnen möchten, lassen wir uns die Standarddateien erstellen.
  Dies erreichen wir mit einem <command>make samples</command></para>

  <screen>root@Knoppix:/usr/src/asterisk-1.4.21.2# make samples
mkdir -p /etc/asterisk
for x in configs/*.adsi; do \
  if [ ! -f /etc/asterisk/$x ]; then \
   /usr/bin/install -c -m 644 $x /etc/asterisk/`/usr/bin/basename $x` ; \


[...]

 else \
  echo "Skipping asterisk.conf creation"; \
 fi
mkdir -p /var/spool/asterisk/voicemail/default/1234/INBOX
build_tools/make_sample_voicemail //var/lib/asterisk //var/spool/asterisk
root@Knoppix:/usr/src/asterisk-1.4.21.2#</screen>

  <para>Fertig! Asterisk ist auf Ihrem System installiert. Mit dem Befehl
  <command>asterisk -V</command> können Sie die installierte Version
  rausfinden (bitte achten Sie auf das großgeschriebene V):<screen>droot@Knoppix:/usr/src/asterisk-1.4.21.2# asterisk -V
Asterisk 1.4.21.2
root@Knoppix:/usr/src/asterisk-1.4.21.2# </screen></para>
</section>