<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
"http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd">
<section id="installation-1.4-knoppix-5.1" lang="de"
         revision="$Revision:473 $">
  <!--
% Copyright (c) 2006 - 2008 by 
% Stefan Wintermeyer <sw@amooma.de>
% 2009 Philipp Kempgen <philipp.kempgen@amooma.de>
% Permission is granted to copy, distribute and/or modify this document
% under the terms of the GNU Free Documentation License, Version 1.2
% or any later version published by the Free Software Foundation;
% with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
% Texts. A copy of the license is included in the section entitled "GNU
% Free Documentation License".
% Asterisk training and consulting is offered at http://www.amooma.de
-->

  <title>Installation Asterisk 1.4.x auf Knoppix 5.1</title>

  <indexterm>
    <primary>Installation</primary>

    <secondary>Asterisk 1.4</secondary>

    <tertiary>Knoppix</tertiary>
  </indexterm>

  <para>Die hier aufgeführte Installationsanleitung ist für ein einfaches
  Asterisk-System mit grundlegenden Features. Für Funktionen wie ISDN-Support
  oder Telefonkonferenzen ist die <link
  linkend="installation-1.4-debian">Standardinstallation auf einem Debian
  Linux</link> besser geeignet. Die hier aufgeführte Installation reicht aber
  aus, um ein Gefühl für das System zu bekommen und um die Programmierbasics
  im Dialplan zu lernen.</para>

  <note>
    <para>Bitte beachten Sie, dass Knoppix ein <ulink
    url="http://de.wikipedia.org/wiki/Live-System">Live-System</ulink> ist,
    das direkt von der CD gebootet wird und keine Daten auf die Festplatte
    schreibt. So können Sie gefahrlos mit Asterisk experimentieren. Allerdings
    sollten sie vor dem Runterfahren des Rechners Ihre Konfigurationen auf
    einem externen Medium (z.B. einem USB-Stick) sichern. Mehr Informationen
    zu Knoppix finden Sie auf <ulink
    url="http://de.wikipedia.org/wiki/Knoppix">http://de.wikipedia.org/wiki/Knoppix</ulink>
    und natürlich auf der <ulink url="http://www.knoppix.net/">Knoppix
    Homepage</ulink>.</para>
  </note>

  <para>Bitte booten Sie Ihr System mit einer Knoppix CD (hier Version 5.1).
  ISO Images dieser CD finden Sie auf einem der Knoppix Mirrors (siehe <ulink
  url="http://www.knopper.net/knoppix-mirrors/">http://www.knopper.net/knoppix-mirrors/</ulink>).</para>

  <note>
    <para>Wir benutzen hier absichtlich nicht die brandaktuelle Version 6.1,
    denn diese hat von Haus aus keine Build-Umgebung, also keinen Compiler
    usw. Natürlich könnte man die erforderlichen Tools nachinstallieren, aber
    dadurch ginge der Charme dieser Anleitung mit einem Live-System zum
    Ausprobieren auf die Schnelle verloren.</para>
  </note>

  <note>
    <para>Bitte loggen Sie sich nach der Installation als Benutzer
    <literal>knoppix</literal> am System ein (das geschieht automatisch) und
    führen Sie danach in einem Terminal-Fenster den Befehl <command>sudo
    bash</command> aus, um eine Root Shell zu bekommen. Alle hier angegebenen
    Befehle werden mit dem Benutzer <literal>root</literal>
    ausgeführt.<screen>knoppix@Knoppix:~$ <emphasis role="bold"><command>sudo bash</command></emphasis>
root@Knoppix:~# </screen></para>
  </note>

  <para>Als erstes wechseln wir in das Verzeichnis
  <filename>/usr/src</filename>:<screen>root@Knoppix:~# <emphasis role="bold"><command>cd /usr/src/</command></emphasis>
root@Knoppix:/usr/src# </screen></para>

  <para>Auf der Asterisk-Homepage <ulink
  url="http://www.asterisk.org/">http://www.asterisk.org/</ulink> finden Sie
  die notwendigen Quellen, um Asterisk zu mit allen sinnvollen Extras zu
  installieren. Nehmen Sie bitte eine <emphasis role="bold">stabile</emphasis>
  und keine Entwickler-Version und laden Sie diese wie folgt in das
  Verzeichnis <filename>/usr/src/</filename> herunter:</para>

  <screen>root@Knoppix:/usr/src# <emphasis role="bold"><command>wget http://downloads.digium.com/pub/asterisk/asterisk-1.4-current.tar.gz</command></emphasis>
--17:34:09--  http://downloads.digium.com/pub/asterisk/asterisk-1.4-current.tar.gz
           =&gt; `asterisk-1.4-current.tar.gz'
Auflösen des Hostnamen »downloads.digium.com«.... 216.27.40.102
Verbindungsaufbau zu downloads.digium.com|216.27.40.102|:80... verbunden.
HTTP Anforderung gesendet, warte auf Antwort... 200 OK
Länge: 11.528.693 (11M) [application/x-gzip]

100%[====================================&gt;] 11.528.693   280.98K/s    ETA 00:00

17:34:45 (314.52 KB/s) - »asterisk-1.4-current.tar.gz« gespeichert [11528693/11528693]

root@Knoppix:/usr/src# </screen>

  <para>Danach die komprimierte Datei entpacken:<screen>root@Knoppix:/usr/src# <emphasis role="bold"><command>tar xvzf asterisk-1.4-current.tar.gz</command></emphasis>
asterisk-1.4.21.2/
asterisk-1.4.21.2/res/
asterisk-1.4.21.2/res/.res_crypto.moduleinfo
asterisk-1.4.21.2/res/.res_smdi.makeopts
asterisk-1.4.21.2/res/.res_jabber.moduleinfo
<replaceable>[...]</replaceable>
asterisk-1.4.21.2/.version
asterisk-1.4.21.2/Makefile
asterisk-1.4.21.2/config.guess
root@Knoppix:/usr/src# </screen></para>

  <para><important>
      <para>Bitte beachten Sie dass sich die folgenden Verzeichnisnamen
      natürlich mit aufsteigenden Versionsnummern im Laufe der Zeit verändern.
      Es liegt in der Natur eines Buchs, dass diese Versionsnummern nicht
      immer aktuell gehalten werden können.</para>
    </important></para>

  <para>Danach gehen wir in das Asterisk-Source-Verzeichnis um Asterisk zu
  kompilieren:<screen>root@Knoppix:/usr/src# <emphasis role="bold"><command>cd asterisk-1.4.21.2</command></emphasis> 
root@Knoppix:/usr/src/asterisk-1.4.21.2# <emphasis role="bold"><command>./configure &amp;&amp; make &amp;&amp; make install</command></emphasis>
checking build system type... i686-pc-linux-gnu
checking host system type... i686-pc-linux-gnu
checking for gcc... gcc
checking for C compiler default output file name... a.out
<replaceable>[...]</replaceable>
if [ -f contrib/firmware/iax/iaxy.bin ] ; then \
  /usr/bin/install -c -m 644 contrib/firmware/iax/iaxy.bin /var/lib/asterisk/firmware/iax/iaxy.bin; \
 fi
 +---- Asterisk Installation Complete -------+
 +                                           +
 +    YOU MUST READ THE SECURITY DOCUMENT    +
 +                                           +
 + Asterisk has successfully been installed. +
 + If you would like to install the sample   +
 + configuration files (overwriting any      +
 + existing config files), run:              +
 +                                           +
 +               make samples                +
 +                                           +
 +-----------------  or ---------------------+
 +                                           +
 + You can go ahead and install the asterisk +
 + program documentation now or later run:   +
 +                                           +
 +              make progdocs                +
 +                                           +
 + **Note** This requires that you have      +
 + doxygen installed on your local system    +
 +-------------------------------------------+
root@Knoppix:/usr/src/asterisk-1.4.21.2# </screen></para>

  <para>Die eben kompilierten Programmdateien sind jetzt auf dem System
  installiert. Allerdings finden wir im Asterisk-Konfigurationsverzeichnis
  <filename>/etc/asterisk/</filename> noch gähnende Leere vor. Da wir nicht
  von Null beginnen möchten, lassen wir uns die Beispieldateien
  erstellen:</para>

  <screen>root@Knoppix:/usr/src/asterisk-1.4.21.2# <emphasis role="bold"><command>make samples</command></emphasis>
mkdir -p /etc/asterisk
for x in configs/*.adsi; do \
  if [ ! -f /etc/asterisk/$x ]; then \
   /usr/bin/install -c -m 644 $x /etc/asterisk/`/usr/bin/basename $x` ; \
<replaceable>[...]</replaceable>
 else \
  echo "Skipping asterisk.conf creation"; \
 fi
mkdir -p /var/spool/asterisk/voicemail/default/1234/INBOX
build_tools/make_sample_voicemail //var/lib/asterisk //var/spool/asterisk
root@Knoppix:/usr/src/asterisk-1.4.21.2# </screen>

  <para>Fertig! Asterisk ist auf Ihrem System installiert. So können Sie die
  installierte Version rausfinden (bitte achten Sie auf das großgeschriebene
  V):<screen>droot@Knoppix:/usr/src/asterisk-1.4.21.2# <emphasis role="bold"><command>asterisk -V</command></emphasis>
Asterisk 1.4.21.2
root@Knoppix:/usr/src/asterisk-1.4.21.2# </screen></para>
</section>
