<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
"http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd">
<section id="functions-sql_esc" lang="de" revision="$Revision$">
  <!--
% Copyright (c) 2006 - 2008 by 
% Stefan Wintermeyer <stefan.wintermeyer@amooma.de>
% Philipp Kempgen <philipp.kempgen@amooma.de>
% Permission is granted to copy, distribute and/or modify this document
% under the terms of the GNU Free Documentation License, Version 1.2
% or any later version published by the Free Software Foundation
% with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
% Texts. A copy of the license is included in the section entitled "GNU
% Free Documentation License".
% Asterisk training and consulting is offered at http://www.amooma.de
-->

  <title><literal>SQL_ESC()</literal><indexterm significance="preferred">
      <primary>Dialplan-Funktionen</primary>

      <secondary><code>SQL_ESC()</code></secondary>
    </indexterm></title>

  <synopsis>SQL_ESC(<replaceable>string</replaceable>)</synopsis>

  <simpara><quote>Escaped</quote> (d.h. maskiert) einfache
  Anführungszeichen<footnote>
      <para>Typographisch ist es zwar nicht korrekt hier von einfachen
      Anführungszeichen zu sprechen, denn es handelt sich um Apostrophen, aber
      das lassen wir mal außer Acht. Jeder Programmierer weiß was gemeint
      ist.</para>
    </footnote> (<literal>'</literal>) in SQL-Befehlen um <quote>SQL
  Injection</quote><footnote>
      <para>SQL-Einschleusung, <ulink
      url="http://de.wikipedia.org/wiki/SQL-Injection">http://de.wikipedia.org/wiki/SQL-Injection</ulink></para>
    </footnote> zu verhindern. Dies ist hilfreich bei Verwendung der
  <literal>ODBC_<replaceable>...</replaceable>()</literal>-Datenbank-Funktionen
  (siehe <xref linkend="functions-odbc_function" />).</simpara>

  <important>
    <para>Das ist ein gutes Beispiel warum man <emphasis>nie</emphasis>
    doppelte Anführungszeichen (<literal>"</literal>) zum Begrenzen von
    Strings in SQL-Befehlen verwenden sollte, denn diese würden hier
    <emphasis>nicht</emphasis> maskiert. Also nochmal: Verwenden Sie,
    ANSI-SQL-konform, einfache Anführungszeichen!</para>
  </important>

  <programlisting>exten =&gt; 123,1,Set(name=philipp)
exten =&gt; 123,n,Set(telnr=${ODBC_SQL(SELECT `telnr` FROM `liste` WHERE `name`='${SQL_ESC(${name})}')}
exten =&gt; 123,n,Verbose(1,Telefonnummer ist: ${telnr})</programlisting>

  <xi:include href="sql_esc-help.xml" xpointer="xpointer(/note/*)"
              xmlns:xi="http://www.w3.org/2001/XInclude" />

  <formalpara>
    <title>Siehe auch</title>

    <para><xref linkend="functions-odbc_function" />, <xref
    linkend="functions-odbc_sql" /></para>
  </formalpara>
</section>
