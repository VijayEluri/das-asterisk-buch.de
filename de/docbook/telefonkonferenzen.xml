<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
"http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd">
<chapter id="telefonkonferenzen" lang="de" revision="$Revision$">
  <!--% Copyright (c) 2007 - Stefan Wintermeyer <sw@amooma.de>
% Permission is granted to copy, distribute and/or modify this document
% under the terms of the GNU Free Documentation License, Version 1.2
% or any later version published by the Free Software Foundation;
% with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
% Texts. A copy of the license is included in the section entitled "GNU
% Free Documentation License".
% Asterisk training and consulting is offered at http://www.amooma.de-->

  <title>Telefonkonferenzen</title>

  <section id="konferenzraum-einleitung">
    <title>Einleitung</title>

    <para>Asterisk bietet von Haus aus ein sehr gutes Konferenztool.
    Allerdings gilt auch hier wie so oft im Umgang mit Asterisk: Es gibt keine
    perfekte fertige Lösung! Man muss sich alles aus kleinen Bausteinen
    zusammenbauen. Ein in Deutschland typisches Beispiel dafür ist die
    Dreier-Konferenz. In Asterisk gibt es keine
    Dreier-Konferenzfunktionalität. Es gibt "nur" eine n-er-Konferenz. Wenn
    man daraus eine Dreier-Konferenz machen will, muss man die Teilnehmerzahl
    auf 3 begrenzen.</para>
  </section>

  <section id="konferenzraum-installation">
    <title>Installation und das Timing-Device</title>

    <para>Eine Standard-Asterisk-Installation, wie Sie sie aus dem ersten
    Kapitel des Buchs kennen, ist nicht in der Lage, Telefonkonferenzen zu
    realisieren. Das Problem liegt am nicht vorhandenen Timing-Device. Um die
    eingehenden Channels einer Telefonkonferenz richtig mischen zu können,
    benötigt Asterisk einen klaren und für alle Channels gleichen Takt. Es
    gibt hierfür prinzipiell zwei Möglichkeiten:</para>

    <itemizedlist>
      <listitem>
        <para>Treiber einer Hardware-Karte</para>

        <para>Wenn Sie die Zaptel-Treiber einer Digium-Karte, Sangoma-Karte
        und -Treiber oder den Junghanns BRIstuff zusammen mit einer ISDN-Karte
        installieren, bekommt Asterisk automatisch ein Timing-Device.</para>
      </listitem>

      <listitem>
        <para>ztdummy-Modul ohne Hardware</para>

        <para>Wer keine entsprechende Hardware zur Verfügung hat oder einbauen
        will, der kann auf das <code>ztdummy</code>-Modul in Kombination mit
        einem 2.6er-Kernel zurückgreifen.<footnote>
            <para>Es ist auch möglich, ein ztdummy-Modul mit einem
            2.4er-Kernel zu kompilieren. Dies setzt aber eine spezielle
            USB-Hardware voraus und ist deshalb ein suboptimaler Weg.</para>
          </footnote></para>
      </listitem>
    </itemizedlist>

    <para>Um herauszufinden, ob Ihr Asterisk auch die Konferenzfunktionalität
    anbietet, gehen Sie bitte ins CLI und geben <command>show application
    MeetMe</command> ein. Sollte der Hilfetext angezeigt werden, können Sie
    eine Konferenz einleiten.</para>
  </section>

  <section id="konferenzraum-definition">
    <title>Definition von Konferenzräumen</title>

    <para>In Asterisk finden Konferenzen immer in virtuellen Konferenzräumen
    statt. Diese müssen in der Konfigurationsdatei
    <filename>/etc/asterisk/meetme.conf</filename> definiert werden. Dies
    geschieht im Bereich <code>[rooms]</code>, und die Syntax ist denkbar
    einfach: <code>conf =&gt;
    Konferenzraumnummer[,PIN][,Admin-PIN].</code></para>

    <para>Möchten Sie einen für jeden frei zugänglichen Konferenzraum mit der
    Nummer 1234 einrichten, so muss der entsprechende Teil in der
    <filename>meetme.conf</filename> wie folgt aussehen:<programlisting>[rooms]
conf =&gt; 1234</programlisting></para>

    <para>Sollen zusätzlich noch die Räume 700 bis 705 mit jeweils dem
    gleichen PIN 5678 eingerichtet werden, so sieht die <filename>meetme.conf
    </filename>wie folgt aus:<programlisting>[rooms]
conf =&gt; 1234
conf =&gt; 700,5678
conf =&gt; 701,5678
conf =&gt; 702,5678
conf =&gt; 703,5678
conf =&gt; 704,5678
conf =&gt; 705,5678
</programlisting></para>
  </section>

  <section id="konferenzraum-meetme">
    <title>Zugang im Dialplan</title>

    <para>Mit der Applikation <code>MeetMe()</code> können Sie ganz einfach in
    einen Konferenzraum eintreten. Soll z. B. jeder Anrufer, der die Nummer
    5555 anruft, in den Konferenzraum 1234 gestellt werden, so geschieht dies
    mit folgendem Dialplan:<programlisting>[intern]
exten =&gt; 5555,1,Answer()
exten =&gt; 5555,n,Wait(1)
exten =&gt; 5555,n,MeetMe(1234)
exten =&gt; 5555,n,Hangup()</programlisting></para>
  </section>

  <section id="meetmecount-ansage">
    <title>Anzahl der Teilnehmer ansagen</title>

    <para>Mit der Option <code>c</code> kann man einem Anrufer die Anzahl der
    Personen in einem Konferenzraum mitteilen:<programlisting>[intern]
exten =&gt; 5555,1,Answer()
exten =&gt; 5555,n,Wait(1)
exten =&gt; 5555,n,MeetMe(1234,c)
exten =&gt; 5555,n,Hangup()</programlisting></para>
  </section>
</chapter>
