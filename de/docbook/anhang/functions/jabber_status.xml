<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
"http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd">
<section id="functions-jabber_status" lang="de" revision="$Revision$">
  <!--
% Copyright (c) 2006 - 2008 by 
% Stefan Wintermeyer <stefan.wintermeyer@amooma.de>
% Philipp Kempgen <philipp.kempgen@amooma.de>
% Permission is granted to copy, distribute and/or modify this document
% under the terms of the GNU Free Documentation License, Version 1.2
% or any later version published by the Free Software Foundation
% with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
% Texts. A copy of the license is included in the section entitled "GNU
% Free Documentation License".
% Asterisk training and consulting is offered at http://www.amooma.de
-->

  <title><literal>JABBER_STATUS()</literal><indexterm significance="preferred">
      <primary>Dialplan-Funktionen</primary>

      <secondary><code>JABBER_STATUS()</code></secondary>
    </indexterm></title>

  <synopsis>JABBER_STATUS(<replaceable>jabber</replaceable>,<replaceable>buddy</replaceable>[/<replaceable>resource</replaceable>])</synopsis>

  <simpara>Gibt den Status des Jabber-Benutzers
  <replaceable>buddy</replaceable> zurück. Zum Verbinden wird die Definition
  <replaceable>jabber</replaceable> aus <filename>jabber.conf</filename>
  verwendet. Die Jabber-ID <replaceable>buddy</replaceable> kann optional
  durch die Angabe <replaceable>resource</replaceable> ergänzt
  werden.<footnote>
      <para>Zur Erklärung dieser Jabber-Begriffe siehe <ulink
      url="http://de.wikipedia.org/wiki/Jabber">http://de.wikipedia.org/wiki/Jabber</ulink>,
      <ulink
      url="http://de.wikipedia.org/wiki/Jabber_Identifier">http://de.wikipedia.org/wiki/Jabber_Identifier</ulink>.</para>
    </footnote></simpara>

  <para>Mögliche Rückgabewerte sind:<variablelist termlength="3">
      <varlistentry>
        <term>1</term>

        <listitem>
          <para>Online, Angemeldet</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>2</term>

        <listitem>
          <para>Chatty, Gesprächig</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>3</term>

        <listitem>
          <para>Away, Abwesend</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>4</term>

        <listitem>
          <para>XAway, Extended Away, Not available, Länger abwesend, Nicht
          verfügbar</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>5</term>

        <listitem>
          <para>DND, Do not disturb, Nicht stören</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>6</term>

        <listitem>
          <para>Offline, Abgemeldet</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>7</term>

        <listitem>
          <para>Not in roster, Nicht im <quote>Roster</quote>
          (Kontaktliste)</para>
        </listitem>
      </varlistentry>
    </variablelist></para>

  <programlisting>123 =&gt; {
    Set(status=${JABBER_STATUS(asterisk,philipp@example.com/home)});
    Verbose(1,### Der Jabber-Status von philipp ist: ${status});
    if ("${status}" = "1") {
        Verbose(1,### anwesend. per Jabber anrufen);
        Dial(Gtalk/asterisk-gmail/buddy@gmail.com);
    }
    else if ("${status}" = "5") {
        Verbose(1,### DND);
        VoiceMail(${EXTEN});
    }
    else {
        Verbose(1,### per SIP anrufen);
        Dial(SIP/philipp);
    }
}</programlisting>

  <xi:include href="jabber_status-help.xml" xpointer="xpointer(/note/*)"
              xmlns:xi="http://www.w3.org/2001/XInclude" />

  <formalpara>
    <title>Siehe auch</title>

    <para><xref linkend="applications-jabberstatus" />, <xref
    linkend="applications-jabbersend" />,
    <filename>jabber.conf</filename></para>
  </formalpara>
</section>
