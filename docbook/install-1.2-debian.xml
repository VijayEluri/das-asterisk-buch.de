<?xml version="1.0" encoding="UTF-8"?>
<section id="installation-1.2-debian" lang="de" revision="$Revision: 1.7 $">
  <!--% Copyright (c) 2006 - Stefan Wintermeyer <sw@amooma.de>
% Permission is granted to copy, distribute and/or modify this document
% under the terms of the GNU Free Documentation License, Version 1.2
% or any later version published by the Free Software Foundation;
% with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
% Texts. A copy of the license is included in the section entitled "GNU
% Free Documentation License".
% Asterisk training and consulting is offered at http://www.amooma.de-->

  <title>Installation Asterisk 1.2.x auf Debian Linux</title>

  <para>Diese Installationsanleitung setzt ein frisch installiertes Debian
  GNU/Linux 3.1 (a.k.a sarge) voraus. Ein ISO-Image für eine entsprechende
  i386er Debian Linux-Installation befindet sich unter <ulink
  url="http://cdimage.debian.org/debian-cd/3.1_r4/i386/iso-cd/debian-31r4-i386-netinst.iso"><citetitle>http://cdimage.debian.org/debian-cd/3.1_r4/i386/iso-cd/debian-31r4-i386-netinst.iso</citetitle></ulink>.
  Eine Debian GNU/Linux-Installationsanleitung steht unter <ulink
  url="http://www.debian.org/releases/stable/i386/"><citetitle>http://www.debian.org/releases/stable/i386/</citetitle></ulink>
  und ein allgemeines Anwenderhandbuch unter <ulink
  url="http://debiananwenderhandbuch.de/"><citetitle>http://debiananwenderhandbuch.de.</citetitle></ulink></para>

  <para><emphasis>Nach erfolgreicher Installation des Debian Linux-Systems
  melden Sie sich als Benutzer root in das System an und führen Sie die hier
  nachfolgend angegebenen Befehle aus. Bitte achten Sie darauf, keinen Schritt
  auszulassen und die Schritte als Benutzer root
  durchzuführen.</emphasis></para>

  <para>Als Erstes stellen Sie mit einem <command>apt-get update</command>
  sicher, dass <code>apt-get</code> alle aktuellen Paketlisten zur Verfügung
  hat:<screen>debian:~# apt-get updateyyy123yyysw
OK   http://ftp.de.debian.org stable/main Packagesyyy123yyysw
OK   http://ftp.de.debian.org stable/main Releaseyyy123yyysw
OK   http://security.debian.org stable/updates/main Packagesyyy123yyysw
OK   http://security.debian.org stable/updates/main Releaseyyy123yyysw
OK   http://security.debian.org stable/updates/contrib Packagesyyy123yyysw
OK   http://security.debian.org stable/updates/contrib Releaseyyy123yyysw
OK   http://ftp.de.debian.org stable/main Sourcesyyy123yyysw
OK   http://ftp.de.debian.org stable/main Releaseyyy123yyysw
Paketlisten werden gelesen... Fertigyyy123yyysw
debian:~#yyy123yyysw</screen></para>

  <para>Um sicherzugehen, dass alle Pakete auf dem neuesten Stand sind, führen
  Sie zur Sicherheit noch ein <command>apt-get -y upgrade</command>
  aus:<screen>debian:~# apt-get -y upgradeyyy123yyysw
Paketlisten werden gelesen... Fertigyyy123yyysw
Abhängigkeitsbaum wird aufgebaut... Fertigyyy123yyysw
0 aktualisiert, 0 neu installiert, 0 zu entfernen und 0 nicht aktualisiert.yyy123yyysw
debian:~#yyy123yyysw</screen></para>

  <para>Jetzt müssen Sie mit <command>apt-get -y install openssl zlibc
  libkrb5-dev libncurses5-dev libssl-dev zlib1g-dev</command> noch ein paar
  Pakete nachinstallieren, damit das Kompilieren von Asterisk erfolgreich
  durchgeführt werden kann:</para>

  <screen>debian:~# apt-get -y install openssl zlibc libkrb5-dev libncurses5-dev libssl-dev zlib1g-devyyy123yyysw
Paketlisten werden gelesen... Fertigyyy123yyysw
Abhängigkeitsbaum wird aufgebaut... Fertigyyy123yyysw
Die folgenden zusätzlichen Pakete werden installiert:yyy123yyysw
  comerr-dev libkadm55yyy123yyysw
Vorgeschlagene Pakete:yyy123yyysw
  doc-base krb5-doc ca-certificatesyyy123yyysw
Die folgenden NEUEN Pakete werden installiert:yyy123yyysw
  comerr-dev libkadm55 libkrb5-dev libncurses5-dev libssl-dev opensslyyy123yyysw
  zlib1g-dev zlibcyyy123yyysw
0 aktualisiert, 8 neu installiert, 0 zu entfernen und 0 nicht aktualisiert.yyy123yyysw
Es müssen 6025kB Archive geholt werden.yyy123yyysw
Nach dem Auspacken werden 18,8MB Plattenplatz zusätzlich benutzt.yyy123yyysw
Hole:1 http://ftp.de.debian.org stable/main libkadm55 1.3.6-2sarge3 [165kB]yyy123yyysw
Hole:2 http://ftp.de.debian.org stable/main libncurses5-dev 5.4-4 [1038kB]yyy123yyysw
Hole:3 http://ftp.de.debian.org stable/main libssl-dev 0.9.7e-3sarge4 [2555kB] yyy123yyysw
Hole:4 http://ftp.de.debian.org stable/main openssl 0.9.7e-3sarge4 [906kB]     yyy123yyysw
Hole:5 http://ftp.de.debian.org stable/main zlib1g-dev 1:1.2.2-4.sarge.2 [488kB]yyy123yyysw
Hole:6 http://ftp.de.debian.org stable/main zlibc 0.9j-7 [245kB]               yyy123yyysw
Hole:7 http://ftp.de.debian.org stable/main comerr-dev 2.1-1.37-2sarge1 [53,0kB]yyy123yyysw
Hole:8 http://ftp.de.debian.org stable/main libkrb5-dev 1.3.6-2sarge3 [574kB]  yyy123yyysw
Es wurden 6025kB in 57s geholt (104kB/s)                                       yyy123yyysw
Wähle vormals abgewähltes Paket libkadm55.yyy123yyysw
(Lese Datenbank ... 32512 Dateien und Verzeichnisse sind derzeit installiert.)yyy123yyysw
Entpacke libkadm55 (aus .../libkadm55_1.3.6-2sarge3_i386.deb) ...yyy123yyysw
Wähle vormals abgewähltes Paket libncurses5-dev.yyy123yyysw
Entpacke libncurses5-dev (aus .../libncurses5-dev_5.4-4_i386.deb) ...yyy123yyysw
Wähle vormals abgewähltes Paket libssl-dev.yyy123yyysw
Entpacke libssl-dev (aus .../libssl-dev_0.9.7e-3sarge4_i386.deb) ...yyy123yyysw
Wähle vormals abgewähltes Paket openssl.yyy123yyysw
Entpacke openssl (aus .../openssl_0.9.7e-3sarge4_i386.deb) ...yyy123yyysw
Creating directory /etc/sslyyy123yyysw
Wähle vormals abgewähltes Paket zlib1g-dev.yyy123yyysw
Entpacke zlib1g-dev (aus .../zlib1g-dev_1%3a1.2.2-4.sarge.2_i386.deb) ...yyy123yyysw
Wähle vormals abgewähltes Paket zlibc.yyy123yyysw
Entpacke zlibc (aus .../archives/zlibc_0.9j-7_i386.deb) ...yyy123yyysw
Wähle vormals abgewähltes Paket comerr-dev.yyy123yyysw
Entpacke comerr-dev (aus .../comerr-dev_2.1-1.37-2sarge1_i386.deb) ...yyy123yyysw
Wähle vormals abgewähltes Paket libkrb5-dev.yyy123yyysw
Entpacke libkrb5-dev (aus .../libkrb5-dev_1.3.6-2sarge3_i386.deb) ...yyy123yyysw
Richte libkadm55 ein (1.3.6-2sarge3) ...yyy123yyysw
yyy123yyysw
Richte libncurses5-dev ein (5.4-4) ...yyy123yyysw
Richte libssl-dev ein (0.9.7e-3sarge4) ...yyy123yyysw
yyy123yyysw
Richte openssl ein (0.9.7e-3sarge4) ...yyy123yyysw
yyy123yyysw
Richte zlib1g-dev ein (1.2.2-4.sarge.2) ...yyy123yyysw
Richte zlibc ein (0.9j-7) ...yyy123yyysw
yyy123yyysw
Richte comerr-dev ein (2.1-1.37-2sarge1) ...yyy123yyysw
yyy123yyysw
Richte libkrb5-dev ein (1.3.6-2sarge3) ...yyy123yyysw
debian:~#yyy123yyysw</screen>

  <para>Auf der Asterisk-Homepage <ulink
  url="http://www.asterisk.org/"><citetitle>http://www.asterisk.org/</citetitle></ulink>
  finden Sie die notwendigen Quellen, um Asterisk zu kompilieren. Nehmen Sie
  bitte eine <emphasis role="bold">stabile</emphasis> und keine
  Entwickler-Version und laden Sie diese mit <command>wget
  http://ftp.digium.com/pub/asterisk/asterisk-1.2-current.tar.gz</command> in
  das Verzeichnis <filename>/usr/src/</filename> herunter:</para>

  <screen>debian:~# cd /usr/srcyyy123yyysw
debian:/usr/src# wget http://ftp.digium.com/pub/asterisk/asterisk-1.2-current.tar.gzyyy123yyysw
--18:30:46--  http://ftp.digium.com/pub/asterisk/asterisk-1.2-current.tar.gzyyy123yyysw
           =&gt; `asterisk-1.2-current.tar.gz'yyy123yyysw
Auflösen des Hostnamen »ftp.digium.com«.... 69.16.138.164yyy123yyysw
Verbindungsaufbau zu ftp.digium.com[69.16.138.164]:80... verbunden.yyy123yyysw
HTTP Anforderung gesendet, warte auf Antwort... 200 OKyyy123yyysw
Länge: 10,584,113 [application/x-gzip]yyy123yyysw
yyy123yyysw
100%[====================================&gt;] 10,584,113   224.71K/s    ETA 00:00yyy123yyysw
yyy123yyysw
18:31:36 (207.67 KB/s) - »asterisk-1.2-current.tar.gz« gespeichert [10584113/10584113]yyy123yyysw
</screen>

  <para>Die komprimierte Datei muss jetzt mit <command>tar xvzf
  asterisk-1.2-current.tar.gz</command> entpackt werden:<screen>debian:/usr/src# tar xvzf asterisk-1.2-current.tar.gz yyy123yyysw
asterisk-1.2.13/yyy123yyysw
asterisk-1.2.13/build_tools/yyy123yyysw
asterisk-1.2.13/build_tools/make_svn_branch_nameyyy123yyysw
asterisk-1.2.13/build_tools/mkdepyyy123yyysw
asterisk-1.2.13/build_tools/make_build_hyyy123yyysw
asterisk-1.2.13/build_tools/make_version_hyyy123yyysw
asterisk-1.2.13/build_tools/make_defaults_hyyy123yyysw
asterisk-1.2.13/aesopt.hyyy123yyysw
asterisk-1.2.13/utils.cyyy123yyysw
asterisk-1.2.13/keys/yyy123yyysw
[...]yyy123yyysw
asterisk-1.2.13/cli.cyyy123yyysw
asterisk-1.2.13/io.cyyy123yyysw
asterisk-1.2.13/ulaw.cyyy123yyysw
asterisk-1.2.13/logger.cyyy123yyysw
debian:/usr/src# yyy123yyysw</screen></para>

  <para>Die entpackten Dateien müssen jetzt kompiliert werden.<footnote>
      <para>Die Linux-Cracks unter den Lesern mögen mir diese starke
      Vereinfachung verzeihen.</para>
    </footnote>Dies geschieht mit dem Befehl <command>make</command> im gerade
  entpackten Verzeichnis.<warning>
      <para>Bitte achten Sie darauf, dass die hier in der Dokumentation
      benutzte Version 1.2.13 vielleicht zum Zeitpunkt Ihrer Installation
      nicht mehr aktuell ist. Entsprechend werden sich die Verzeichnisnamen
      ändern.</para>
    </warning>Übrigens ist dies jetzt ein guter Moment, sich einen Kaffee oder
  Tee zu kochen. Der Kompiliervorgang kann je nach Rechenleistung des PCs
  wenige Minuten oder bis zu einer Stunde dauern.</para>

  <screen>debian:/usr/src# cd asterisk-1.2.13yyy123yyysw
debian:/usr/src/asterisk-1.2.13# makeyyy123yyysw
if cmp -s .cleancount .lastclean ; then echo ; else \yyy123yyysw
        make clean; cp -f .cleancount .lastclean;\yyy123yyysw
yyy123yyysw
[...]yyy123yyysw
yyy123yyysw
make[1]: Nothing to be done for `all'.yyy123yyysw
make[1]: Leaving directory `/usr/src/asterisk-1.2.13/stdtime'yyy123yyysw
 +--------- Asterisk Build Complete ---------+yyy123yyysw
 + Asterisk has successfully been built, but +yyy123yyysw
 + cannot be run before being installed by   +yyy123yyysw
 + running:                                  +yyy123yyysw
 +                                           +yyy123yyysw
 +               make install                +yyy123yyysw
 +-------------------------------------------+yyy123yyysw</screen>

  <para>Die Software ist jetzt kompiliert und muss nur noch mit <command>make
  install</command> installiert (sprich an die vorgesehenen Stellen im
  Dateisystem kopiert) werden:</para>

  <screen>debian:/usr/src/asterisk-1.2.13# make installyyy123yyysw
build_tools/make_version_h &gt; include/asterisk/version.h.tmpyyy123yyysw
if cmp -s include/asterisk/version.h.tmp include/asterisk/version.h ; yyy123yyysw
then echo;yyy123yyysw
yyy123yyysw
[...]yyy123yyysw
yyy123yyysw
 +---- Asterisk Installation Complete -------+yyy123yyysw
 +                                           +yyy123yyysw
 +    YOU MUST READ THE SECURITY DOCUMENT    +yyy123yyysw
 +                                           +yyy123yyysw
 + Asterisk has successfully been installed. +yyy123yyysw
 + If you would like to install the sample   +yyy123yyysw
 + configuration files (overwriting any      +yyy123yyysw
 + existing config files), run:              +yyy123yyysw
 +                                           +yyy123yyysw
 +               make samples                +yyy123yyysw
 +                                           +yyy123yyysw
 +-----------------  or ---------------------+yyy123yyysw
 +                                           +yyy123yyysw
 + You can go ahead and install the asterisk +yyy123yyysw
 + program documentation now or later run:   +yyy123yyysw
 +                                           +yyy123yyysw
 +              make progdocs                +yyy123yyysw
 +                                           +yyy123yyysw
 + **Note** This requires that you have      +yyy123yyysw
 + doxygen installed on your local system    +yyy123yyysw
 +-------------------------------------------+yyy123yyysw</screen>

  <para>Geschafft! Die soeben kompilierten Programmdateien sind jetzt auf dem
  System installiert. Allerdings finden wir im
  Asterisk-Konfigurationsverzeichnis <filename>/etc/asterisk/</filename> noch
  gähnende Leere vor. In diesem Verzeichnis liegen die Konfigurationsdateien
  von Asterisk und da wir nicht von Null beginnen möchten, lassen wir uns die
  Standarddateien erstellen. Dies erreichen wir mit <command>make
  samples</command>:</para>

  <screen>debian:/usr/src/asterisk-1.2.13# make samplesyyy123yyysw
build_tools/make_version_h &gt; include/asterisk/version.h.tmpyyy123yyysw
if cmp -s include/asterisk/version.h.tmp include/asterisk/version.h ; yyy123yyysw
then echo;yyy123yyysw
yyy123yyysw
[...]yyy123yyysw
yyy123yyysw
doneyyy123yyysw</screen>

  <para>Fertig! Asterisk ist auf Ihrem System installiert. Mit dem Befehl
  <command>asterisk -V</command> können Sie die installierte Version
  herausfinden (bitte achten Sie auf das großgeschriebene V): <screen>debian:/usr/src/asterisk-1.2.13# asterisk -Vyyy123yyysw
Asterisk 1.2.13yyy123yyysw</screen></para>
</section>