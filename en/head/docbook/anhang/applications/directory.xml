<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
"http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd">
<section id="applications-directory" lang="en" revision="$Revision$">
  <!--
% Copyright (c) 2006 - 2008 by 
% Stefan Wintermeyer <stefan.wintermeyer@amooma.de>
% Philipp Kempgen <philipp.kempgen@amooma.de>
% Permission is granted to copy, distribute and/or modify this document
% under the terms of the GNU Free Documentation License, Version 1.2
% or any later version published by the Free Software Foundation
% with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
% Texts. A copy of the license is included in the section entitled "GNU
% Free Documentation License".
% Asterisk training and consulting is offered at http://www.amooma.de
-->

    <title><literal>Directory()</literal></title>

    <indexterm significance="preferred">
      <primary>Dialplan Applications</primary>

      <secondary><code>Directory()</code></secondary>
    </indexterm>

    <simpara>Provides a directory of users or user voicemail box numbers (for
    more on system directories and Dial-by-Name, see <xref
    linkend="voicemail-telefonbuch" />).</simpara>

    <synopsis><command>Directory(<replaceable>voicemail-context</replaceable>[,<replaceable>dialplan-context</replaceable>[,<replaceable>options</replaceable>]])</command></synopsis>

    <simpara>Lets callers search a directory by the user's name. The list of
    names and extensions is configured in <filename>voicemail.conf</filename>.
    The <emphasis>voicemail-context</emphasis> parameter is
    required.</simpara>

    <simpara>The dialplan-context defines the context to be used when dialing
    the user's extension. If this is not provided, voicemail-context is
    assumed. The only option currently accepted is <code>f</code>, which
    allows dialing by first name.</simpara>

    <simpara>If the user dials "0" (zero) and the extension <code>o</code>
    exists in the current context, the call goes to this extension. Likewise,
    pressing "*" sends the call to the extension a, if it exists. This
    behavior is similar to that found in <code>Voicemail()</code>.</simpara>

    <simpara>Returns 0 unless the caller hangs up.</simpara>

    <programlisting>exten =&gt; *,1,Directory(default,incoming)
exten =&gt; #,1,Directory(default,incoming,f)</programlisting>

    <note>
      <formalpara>
        <title>Internal help for this application in Asterisk 1.4:</title>

        <para><screen>  -= Info about application 'Directory' =- 

[Synopsis]
Provide directory of voicemail extensions

[Description]
  Directory(vm-context[|dial-context[|options]]): This application will present
the calling channel with a directory of extensions from which they can search
by name. The list of names and corresponding extensions is retrieved from the
voicemail configuration file, voicemail.conf.
  This application will immediately exit if one of the following DTMF digits are
received and the extension to jump to exists:
    0 - Jump to the 'o' extension, if it exists.
    * - Jump to the 'a' extension, if it exists.

  Parameters:
    vm-context   - This is the context within voicemail.conf to use for the
                   Directory.
    dial-context - This is the dialplan context to use when looking for an
                   extension that the user has selected, or when jumping to the
                   'o' or 'a' extension.

  Options:
    e - In addition to the name, also read the extension number to the
        caller before presenting dialing options.
    f - Allow the caller to enter the first name of a user in the directory
        instead of using the last name.</screen></para>
      </formalpara>

      <formalpara>
        <title>diff output to internal help in Asterisk 1.2:</title>

        <para><screen>25,26d24
&lt;     e - In addition to the name, also read the extension number to the
&lt;         caller before presenting dialing options.</screen></para>
      </formalpara>
    </note>

    <formalpara>
      <title>See also</title>

      <para><filename>voicemail.conf</filename></para>
    </formalpara>
</section>
