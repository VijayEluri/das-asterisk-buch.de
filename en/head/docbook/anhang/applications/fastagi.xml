<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
"http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd">
<section id="applications-fastagi" lang="en" revision="$Revision$">
  <!--
% Copyright (c) 2006 - 2008 by 
% Stefan Wintermeyer <stefan.wintermeyer@amooma.de>
% Philipp Kempgen <philipp.kempgen@amooma.de>
% Permission is granted to copy, distribute and/or modify this document
% under the terms of the GNU Free Documentation License, Version 1.2
% or any later version published by the Free Software Foundation
% with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
% Texts. A copy of the license is included in the section entitled "GNU
% Free Documentation License".
% Asterisk training and consulting is offered at http://www.amooma.de
-->

    <title><literal>FastAGI()</literal></title>

    <indexterm significance="preferred">
      <primary>Dialplan Applications</primary>

      <secondary><code>FastAGI()</code></secondary>
    </indexterm>

    <simpara>Calls an AGI-compliant application over a network
    connection.</simpara>

    <synopsis><command>FastAGI(agi://<replaceable>hostname</replaceable>[:<replaceable>port</replaceable>][/<replaceable>script</replaceable>],<replaceable>arguments</replaceable>)</command></synopsis>

    <simpara>(Similar to <command>AGI()</command>,
    <command>DeadAGI()</command>, <command>EAGI()</command>)</simpara>

    <simpara>Runs an Asterisk Gateway Interface compliant program on the
    current channel, but calls the application from another host on the
    network. The intent is to help distribute the load of processor-intensive
    AGI scripts or programs to remote servers and reduce start-up latency of
    those programs (a FastAGI script can be started before it is actually
    needed, much like a FastCGI script on a web server).</simpara>

    <simpara><code>FastAGI()</code> attempts to connect directly to a running
    FastAGI program listening for connections on the specified
    <replaceable>port</replaceable> on the server
    <replaceable>hostname</replaceable>. The default port is 4573 if it is not
    specified. If <replaceable>script</replaceable> is defined, it is used to
    populate the variable <code>agi_network_script</code> and passed to the
    FastAGI program. The <replaceable>arguments </replaceable>are also passed
    to the program.</simpara>

    <simpara>A sample FastAGI script can be found at
    <filename>agi/fastagi-test</filename>. Use this is a starting point for
    writing your own FastAGI applications.</simpara>

    <simpara>Returns -1, if the application ends and requests a hang-up;
    returns 0 if it ends without requesting a hang-up.</simpara>

    <programlisting>; Connect to the sample FastAGI program "fastagi-test",
; which must nevertheless be running on the local machine:
exten =&gt; 123,1,Answer()
exten =&gt; 123,n,FastAGI(agi://localhost/fastagi-test)

; Connect to the FastAGI script "test" on the host "testbox"
; at port 9000 and pass parameter "123":
exten =&gt; 124,1,Answer()
exten =&gt; 124,n,FastAGI(agi://testbox:9000/test,123)</programlisting>

    <formalpara>
      <title>See also</title>

      <para><xref linkend="applications-agi" />, <xref
      linkend="applications-deadagi" /></para>
    </formalpara>
</section>
