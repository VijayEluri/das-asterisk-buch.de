<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
"http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd">
<section id="applications-retrydial" lang="en" revision="$Revision$">
  <!--
% Copyright (c) 2006 - 2008 by 
% Stefan Wintermeyer <stefan.wintermeyer@amooma.de>
% Philipp Kempgen <philipp.kempgen@amooma.de>
% Permission is granted to copy, distribute and/or modify this document
% under the terms of the GNU Free Documentation License, Version 1.2
% or any later version published by the Free Software Foundation
% with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
% Texts. A copy of the license is included in the section entitled "GNU
% Free Documentation License".
% Asterisk training and consulting is offered at http://www.amooma.de
-->

    <title><literal>RetryDial()</literal></title>

    <indexterm significance="preferred">
      <primary>Dialplan Applications</primary>

      <secondary><code>RetryDial()</code></secondary>
    </indexterm>

    <simpara>Attemps to dial and retries if the attempt fails.</simpara>

    <synopsis><command>RetryDial(<replaceable>announcement</replaceable>,<replaceable>sleep</replaceable>,<replaceable>retries</replaceable>,<replaceable>technology</replaceable>/<replaceable>resource</replaceable>[&amp;<replaceable>technology2</replaceable>/<replaceable>resource2</replaceable>...][,<replaceable>timeout</replaceable>[,<replaceable>options</replaceable>[,<replaceable>URL</replaceable>]]])</command></synopsis>

    <simpara>Attempts, like <code>Dial()</code>, to call a device. Plays the
    file <replaceable>announcement</replaceable> (without file extension!) if
    no device can be reached, then waits <replaceable>sleep</replaceable>
    seconds before trying again. The default sleep interval is 10 seconds.
    After <replaceable>retries</replaceable> retries, the call is handed to
    the next priority in the dialplan. If <replaceable>retries</replaceable>
    is set to 0 or -1, the application retries indefinitely.</simpara>

    <simpara>A single-digit extension may be dialed by the caller during the
    sleep interval. If this extension exists in the context defined by
    <code>${EXITCONTEXT}</code> or in the current context, the call is passed
    to that extension.</simpara>

    <simpara>All arguments following retries are passed to directly to
    <command><code>Dial()</code></command>.</simpara>

    <programlisting>; Try to dial the number three times, repeat after 5 seconds:
exten =&gt; 123,1,RetryDial(trying-to-connect-you,5,3,IAX2/VOIP/18005554148,30)
; If the caller presses 4 while waiting, try the call on Zap/4:
exten =&gt; 0,1,RetryDial(trying-to-connect-you,5,3,Zap/4/18005554148,30)</programlisting>

    <note>
      <formalpara>
        <title>Internal help for this application in Asterisk 1.4:</title>

        <para><screen>  -= Info about application 'RetryDial' =- 

[Synopsis]
Place a call, retrying on failure allowing optional exit extension.

[Description]
  RetryDial(announce|sleep|retries|dialargs): This application will attempt to
place a call using the normal Dial application. If no channel can be reached,
the 'announce' file will be played. Then, it will wait 'sleep' number of
seconds before retying the call. After 'retires' number of attempts, the
calling channel will continue at the next priority in the dialplan. If the
'retries' setting is set to 0, this application will retry endlessly.
  While waiting to retry a call, a 1 digit extension may be dialed. If that
extension exists in either the context defined in ${EXITCONTEXT} or the current
one, The call will jump to that extension immediately.
  The 'dialargs' are specified in the same format that arguments are provided
to the Dial application.</screen></para>
      </formalpara>

      <formalpara>
        <title>diff output to internal help in Asterisk 1.2:</title>

        <para><screen>- none - </screen></para>
      </formalpara>
    </note>

    <formalpara>
      <title>See also</title>

      <para><xref linkend="applications-dial" /></para>
    </formalpara>
</section>
