<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
"http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd">
<section id="applications-festival" lang="en" revision="$Revision$">
  <!--
% Copyright (c) 2006 - 2008 by 
% Stefan Wintermeyer <stefan.wintermeyer@amooma.de>
% Philipp Kempgen <philipp.kempgen@amooma.de>
% Permission is granted to copy, distribute and/or modify this document
% under the terms of the GNU Free Documentation License, Version 1.2
% or any later version published by the Free Software Foundation
% with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
% Texts. A copy of the license is included in the section entitled "GNU
% Free Documentation License".
% Asterisk training and consulting is offered at http://www.amooma.de
-->

    <title><literal>Festival()</literal></title>

    <indexterm significance="preferred">
      <primary>Dialplan Applications</primary>

      <secondary><code>Festival()</code></secondary>
    </indexterm>

    <simpara>Uses the free Festival text-to-speech (TTS) engine to read text
    to the caller.</simpara>

    <synopsis><command>Festival(<replaceable>text</replaceable>[,<replaceable>keys</replaceable>])</command></synopsis>

    <simpara>Connects to the locally running Festival server (which must be
    installed separately), sends it the specified text and plays the resulting
    audio back to the caller. If <replaceable>keys</replaceable> are defined,
    pressing of the defined keys will interrupt playback and return the value
    of the key depressed; if <code>any</code> is provided as the value to
    <replaceable>keys</replaceable>, all keys will be recognized and the call
    will be passed to the appropriate extension in the dialplan.</simpara>

    <simpara>Festival must be started <emphasis>before</emphasis> Asterisk,
    and the channel must be answered with
    <code><command>Answer()</command></code>, in order for this application to
    work..</simpara>

    <programlisting>exten =&gt; 123,1,Answer()
exten =&gt; 123,n,Festival('Hello World',#)</programlisting>

    <para>As an alternative to the application
    <command><code>Festival()</code></command>, you may also use the
    <code><command>System()</command></code> command to call Festival's
    command-line program<command> text2wave</command> and play back the
    resulting audio stream with <command><code>Background()</code></command>
    or <command><code>Playback()</code></command>, like so (for example only;
    pay attention to pathnames!):<programlisting>exten =&gt; 123,1,Answer()
exten =&gt; 123,n,System(echo 'Hello World' | text2wave -o sound.wav -otype wav -)
exten =&gt; 123,n,Background(sound)</programlisting></para>

    <note>
      <formalpara>
        <title>Internal help for this application in Asterisk 1.4:</title>

        <para><screen>  -= Info about application 'Festival' =- 

[Synopsis]
Say text to the user

[Description]
  Festival(text[|intkeys]):  Connect to Festival, send the argument, get back the waveform,play it to the user, allowing any given interrupt keys to immediately terminate and return
the value, or 'any' to allow any number back (useful in dialplan)</screen></para>
      </formalpara>

      <formalpara>
        <title>diff output to internal help in Asterisk 1.2:</title>

        <para><screen>- none - </screen></para>
      </formalpara>
    </note>

    <formalpara>
      <title>See also</title>

      <para><filename>contrib/README.festival</filename></para>
    </formalpara>
</section>
