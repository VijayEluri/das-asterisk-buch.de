<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
"http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd">
<section id="applications-voicemailmain" lang="en" revision="$Revision$">
  <!--
% Copyright (c) 2006 - 2008 by 
% Stefan Wintermeyer <stefan.wintermeyer@amooma.de>
% Philipp Kempgen <philipp.kempgen@amooma.de>
% Permission is granted to copy, distribute and/or modify this document
% under the terms of the GNU Free Documentation License, Version 1.2
% or any later version published by the Free Software Foundation
% with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
% Texts. A copy of the license is included in the section entitled "GNU
% Free Documentation License".
% Asterisk training and consulting is offered at http://www.amooma.de
-->

    <title><literal>VoiceMailMain()</literal></title>

    <indexterm significance="preferred">
      <primary>Dialplan Applications</primary>

      <secondary><code>VoiceMailMain()</code></secondary>
    </indexterm>

    <simpara>Allows the caller to check voice mail messages.</simpara>

    <synopsis><command>VoiceMailMain([<replaceable>mailbox</replaceable>][@<replaceable>context</replaceable>][,<replaceable>options</replaceable>])</command></synopsis>

    <para>old syntax:<synopsis><command>VoiceMailMain([[s|p]<replaceable>mailbox</replaceable>][@<replaceable>context</replaceable>])</command></synopsis></para>

    <simpara>Allows access to the mailbox for listening to messages. If the
    mailbox number is not specified, the system prompts the caller for the
    mailbox number.</simpara>

    <simpara>Option <code>s</code> skips the password prompt. Option
    <code>p</code> (prefix) prompts the caller to enter a mailbox number; the
    number specified in the command is then used as a prefix to the number
    provided by the caller and the resulting string is used as the mailbox
    number. This can be useful with virtual mailbox hosting. Option<code>
    a(<replaceable>folder</replaceable>)</code> sends the caller directly to
    the specified folder (default: <code>INBOX</code>).</simpara>

    <simpara>If a context is specified, only mailboxes in the specified
    context are accessible.</simpara>

    <simpara>Returns -1 if the caller hangs up, otherwise 0.</simpara>

    <programlisting>; go to the voicemail menu for mailbox 123 in the default context:
exten =&gt; 123,1,VoiceMailMain(123@default)</programlisting>

    <note>
      <formalpara>
        <title>Internal help for this application in Asterisk 1.4:</title>

        <para><screen>  -= Info about application 'VoiceMailMain' =- 

[Synopsis]
Check Voicemail messages

[Description]
  VoiceMailMain([mailbox][@context][|options]): This application allows the
calling party to check voicemail messages. A specific mailbox, and optional
corresponding context, may be specified. If a mailbox is not provided, the
calling party will be prompted to enter one. If a context is not specified,
the 'default' context will be used.

  Options:
    p    - Consider the mailbox parameter as a prefix to the mailbox that
           is entered by the caller.
    g(#) - Use the specified amount of gain when recording a voicemail
           message. The units are whole-number decibels (dB).
    s    - Skip checking the passcode for the mailbox.
    a(#) - Skip folder prompt and go directly to folder specified.
           Defaults to INBOX</screen></para>
      </formalpara>

      <formalpara>
        <title>diff output to internal help in Asterisk 1.2:</title>

        <para><screen>20,21d19
&lt;     a(#) - Skip folder prompt and go directly to folder specified.
&lt;            Defaults to INBOX</screen></para>
      </formalpara>
    </note>

    <formalpara>
      <title>See also</title>

      <para><xref linkend="applications-voicemail" />,
      <filename>voicemail.conf</filename></para>
    </formalpara>
</section>
