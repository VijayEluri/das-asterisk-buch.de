<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
"http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd">
<section id="applications-background" lang="en" revision="$Revision$">
  <!--
% Copyright (c) 2006 - 2008 by 
% Stefan Wintermeyer <stefan.wintermeyer@amooma.de>
% Philipp Kempgen <philipp.kempgen@amooma.de>
% Permission is granted to copy, distribute and/or modify this document
% under the terms of the GNU Free Documentation License, Version 1.2
% or any later version published by the Free Software Foundation
% with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
% Texts. A copy of the license is included in the section entitled "GNU
% Free Documentation License".
% Asterisk training and consulting is offered at http://www.amooma.de
-->

  <title><literal>Background()</literal></title>

  <indexterm significance="preferred">
    <primary>Dialplan Applications</primary>

    <secondary><code>Background()</code></secondary>
  </indexterm>

  <simpara>Plays a sound file while listening for DTMF input from the
  caller.</simpara>

  <synopsis><synopsis>Background(<replaceable>soundfile1</replaceable>[&amp;<replaceable>soundfile2</replaceable>...][,<replaceable>options</replaceable>[,<replaceable>language</replaceable>]])</synopsis></synopsis>

  <simpara>Plays the specified sound files while waiting for the caller to
  dial an extension. Playback stops the moment the first digit is pressed.
  Filenames must be provided without file extensions; Asterisk chooses the
  file format with the minimum transcoding cost.</simpara>

  <simpara>Allowed options may not be combined:</simpara>

  <variablelist termlength="2">
    <varlistentry>
      <term><code>skip</code></term>

      <listitem>
        <simpara>Playback is skipped if the channel is not in the
        <code>up</code> state when the application is run. If skip is
        specified, the application ends immediately when the channel is hung
        up.</simpara>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><code>noanswer</code></term>

      <listitem>
        <simpara>The channel is only answered after the specified sound file
        has been played. The default behavior is to answer the channel
        automatically before playing the sound file. Note that not all channel
        types allow playback of a message before being answered.</simpara>
      </listitem>
    </varlistentry>
  </variablelist>

  <simpara>The <code>language</code> parameter can be used to specify a
  language for the sound file(s) played, in the event this should be different
  than the language currently specified for the channel.</simpara>

  <simpara>Returns -1 if hung up or if the specified sound file does not
  exist, otherwise returns 0.</simpara>

  <programlisting>exten =&gt; 123,1,Answer()
exten =&gt; 123,n,Background(please-enter-extension)</programlisting>

  <xi:include href="background-help.xml" xpointer="xpointer(/note/*)"
              xmlns:xi="http://www.w3.org/2001/XInclude" />

  <formalpara>
    <title>See also</title>

    <para><xref linkend="applications-playback" />, <xref
    linkend="applications-backgrounddetect" />, CLI-Befehl <code>show
    translation</code></para>
  </formalpara>
</section>
