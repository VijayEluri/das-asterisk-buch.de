<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
"http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd">
<chapter id="telefonkonferenzen" lang="de" revision="$Revision: 1669 $">
  <!--% Copyright (c) 2009 - Stefan Wintermeyer <sw@amooma.de>
% Permission is granted to copy, distribute and/or modify this document
% under the terms of the GNU Free Documentation License, Version 1.2
% or any later version published by the Free Software Foundation;
% with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
% Texts. A copy of the license is included in the section entitled "GNU
% Free Documentation License".
% Asterisk training and consulting is offered at http://www.amooma.de-->

  <title>Conferencing</title>

  <para>Asterisk offers an excellent built-in conferencing system.
  Nevertheless, the same applies here as elsewhere when it comes to Asterisk:
  there is no perfect solution! You still need to build some functionality in
  a modular fashion. An good example is three-way calling. Asterisk does not
  include true three-way calling; to achieve it, you must take a regular
  conference and limit the number of participants to three.</para>

  <section id="konferenzraum-installation">
    <title>Installation and the timing device</title>

    <para>A default Asterisk installation such as the one we performed in the
    first chapter of the book isn't able to handle conferencing. The problem
    is the lack of a timing device. In order to mix channel audio properly,
    Asterisk needs a stable and common clock source. For that clock source,
    there are two options:</para>

    <itemizedlist>
      <listitem>
        <para>Telephony interface card and driver</para>

        <para>Installing a hardware interface card (be it analog or digital
        ISDN) and its driver automatically provides Asterisk with a clock
        source.</para>
      </listitem>

      <listitem>
        <para>ztdummy module without hardware</para>

        <para>If you neither have nor need a hardware interface card, you can
        use the <code>ztdummy</code> kernel module in combination with a 2.6
        kernel.<footnote>
            <para>It is possible to make the ztdummy module work with a 2.4
            kernel, but this assumes special USB hardware and is therefore not
            the best option.</para>
          </footnote></para>
      </listitem>
    </itemizedlist>

    <para>To determine whether your Asterisk installation actually provides
    conferencing service, go into the Asterisk CLI and enter <command>show
    application MeetMe</command>. If the help text appears, conferencing is
    installed.</para>
  </section>

  <section id="konferenzraum-definition">
    <title>Defining conference rooms</title>

    <para>In Asterisk, conferences always take place in virtual conference
    rooms. These must be defined in
    <filename>/etc/asterisk/meetme.conf</filename>, in the
    <code>[rooms]</code> context and the syntax is simple and consistent with
    other Asterisk configuration files: <code>conf =&gt;
    room_number[,PIN][,administrator-PIN].</code></para>

    <para>To create a conference room with the number 1234 which is freely
    available to any caller, make an entry in <filename>meetme.conf</filename>
    as follows:<programlisting>[rooms]
conf =&gt; 1234</programlisting></para>

    <para>You can secure a conference room with an access number (sometimes
    called a personal identification number, or PIN). Say you want to add
    rooms 700 to 705, all with the same PIN 5678. The
    <filename>meetme.conf</filename> would look like this:<programlisting>[rooms]
conf =&gt; 1234
conf =&gt; 700,5678
conf =&gt; 701,5678
conf =&gt; 702,5678
conf =&gt; 703,5678
conf =&gt; 704,5678
conf =&gt; 705,5678
</programlisting></para>
  </section>

  <section id="konferenzraum-meetme">
    <title>Access from the dialplan</title>

    <para>Conferences are accessed easily using the <code>MeetMe()</code>
    application. Say that any caller dialing 5555 is to be placed into the
    conference room 1234. The corresponding dialplan entries would look like
    this:<programlisting>[internal]
exten =&gt; 5555,1,Answer()
exten =&gt; 5555,n,Wait(1)
exten =&gt; 5555,n,MeetMe(1234)
exten =&gt; 5555,n,Hangup()</programlisting></para>
  </section>

  <section id="meetmecount-ansage">
    <title>Announcing the number of conference participants</title>

    <para>The number of participants in the conference may be announced using
    the <code>c</code> option:</para>

    <para><programlisting>[internal]
exten =&gt; 5555,1,Answer()
exten =&gt; 5555,n,Wait(1)
exten =&gt; 5555,n,MeetMe(1234,c)
exten =&gt; 5555,n,Hangup()</programlisting></para>
  </section>
</chapter>
