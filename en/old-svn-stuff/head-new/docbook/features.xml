<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
"http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd">
<chapter id="features" lang="de" revision="$Revision: 1899 $">
  <!--% Copyright (c) 2009
% - Stefan Wintermeyer <sw@amooma.de>
% Permission is granted to copy, distribute and/or modify this document
% under the terms of the GNU Free Documentation License, Version 1.2
% or any later version published by the Free Software Foundation;
% with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
% Texts. A copy of the license is included in the section entitled "GNU
% Free Documentation License".
% Asterisk training and consulting is offered at http://www.amooma.de -->

  <title>Calling features</title>

  <para>Asterisk is powerful, yet there are some features that are routinely
  used in office environments that are either not enabled by default or simply
  very well-hidden. This chapter covers those features, which are configured
  in the <filename>features.conf</filename> file.</para>

  <section id="transfer">
    <title>Call transfer</title>

    <para>If you use the <command>Dial()</command> application without any
    flags or options, you won't be able to transfer a current call to another
    extension. This feature must be explicitly enabled in
    <command>Dial()</command> via the <code>t</code>, <code>T</code> or
    <code>tT</code> options. This is described in detail in <xref
    linkend="applications-dial" />. If you want to give both the caller and
    called party rights to transfer the call, you must use the <code>tT</code>
    options:</para>

    <para><programlisting>exten =&gt; _2XXX,1,Dial(SIP/${EXTEN},tT)</programlisting></para>

    <section id="blind-transfer">
      <title>Blind transfer</title>

      <para>The expression <quote>blind transfer</quote> describes transfers
      which occur without an interaction between the transferer (the original
      recipient of the call) and the transferee (the new intended recipient).
      By default, this is done by entering <literal>#1</literal> followed by
      the new destination number. If you want to transfer the current call to
      extension 2323 you would dial <literal>#12323</literal>.</para>

      <para>You can change the feature code for blind transfers in
      <filename>/etc/asterisk/features.conf</filename> in the context
      <code>[featuremap]</code>:<programlisting>[featuremap]
blindxfer =&gt; #1         ; Blind transfer</programlisting></para>
    </section>

    <section id="attended-transfer">
      <title>Attended Transfer</title>

      <para>In contrast to the <quote>blind transfer</quote>, the original
      recipient can discuss the call in private with the intended recipient
      using <quote>attended transfer</quote>; the call is only transferred
      once the original recipient hangs up. By default, attended transfers are
      initiated with the <literal>*2</literal> key combination, followed by
      the new destination number.</para>

      <para>You can change the feature code for attended transfers in
      <filename>/etc/asterisk/features.conf</filename> in the context
      <code>[featuremap]</code>:<programlisting>[featuremap]
atxfer =&gt; *2                    ; Attended transfer</programlisting></para>

      <simpara>If you are using call limits in your devices, be aware that
      attended transfers temporarily use two channels.</simpara>
    </section>
  </section>

  <section id="park">
    <title id="parking">Call parking</title>

    <para>To <quote>park a call</quote> is to place an active call in a
    virtual <quote>parking lot</quote> where it can be retrieved from any
    other extension by dialing the parking position number. For call parking
    to work in Asterisk, the <code>parkedcalls</code> context must be included
    (using <code>include</code>) in the current context. For
    example:<programlisting>[building-mgr]
exten =&gt; _2XXX,1,Dial(SIP/${EXTEN})
include =&gt; parkedcalls</programlisting>Only once this context has been
    <quote>included</quote> can calls be parked by dialing
    <literal>#700</literal> during an active call. Asterisk will read back the
    parking position to the caller (be sure to note it!) Calling this park
    position number (<emphasis>e.g.</emphasis> <literal>701</literal>)
    retrieves the call from any telephone in a context that includes the
    <code>parkedcalls</code> context.<warning>
        <para>Parking positions are not secured in any way. If person A parks
        a call at position 705 and person B dials 705 by accident, she will
        connect to the parked call.</para>
      </warning></para>

    <para>Feature codes, the number of available parking positions and the
    name of the parking context can all be changed in
    <filename>/etc/asterisk/features.conf</filename> in the
    <code>[general]</code> context:<programlisting>[general]
parkext =&gt; 700          ; parking extension
parkpos =&gt; 701-720      ; parking positions
context =&gt; parkedcalls  ; context for parked calls</programlisting></para>
  </section>
</chapter>
