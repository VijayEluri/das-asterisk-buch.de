<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE appendix PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
"http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd">
<appendix id="agi-commands" lang="de" revision="$Revision: 1667 $">
  <!--
% Copyright (c) 2006 - 2009 by 
% Philipp Kempgen <philipp.kempgen@amooma.de>
% Permission is granted to copy, distribute and/or modify this document
% under the terms of the GNU Free Documentation License, Version 1.2
% or any later version published by the Free Software Foundation
% with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
% Texts. A copy of the license is included in the section entitled "GNU
% Free Documentation License".
% Asterisk training and consulting is offered at http://www.amooma.de
-->

  <title>AGI command summary</title>

  <indexterm>
    <primary>AGI</primary>

    <secondary>commands</secondary>
  </indexterm>

  <para>The following commands, which enable an AGI script (see <xref
  linkend="chapter-agi" />) to interact with Asterisk, are taken from the
  Asterisk internal help and provided here for your convenience. Additional
  information is provided for commands which merit it. Most of the command
  names are derived from their application (see <xref
  linkend="applications" />) or function (see <xref linkend="functions" />)
  equivalents. Remember that you must enclose empty parameters in
  <code>""</code>. The help detail <quote><literal>Runs Dead:
  Yes|No</literal></quote> indicates whether the command can be used on a dead
  (<emphasis>i.e.</emphasis> unanswered or hung-up) channel. For more
  information, see <xref linkend="applications-deadagi" />.</para>

  <section id="agi-command-answer">
    <title><code>ANSWER</code></title>

    <xi:include href="agi/answer-help.xml" xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <section id="agi-command-asyncagi-break">
    <title><code>ASYNCAGI BREAK</code></title>

    <xi:include href="agi/asyncagi-break-help.xml"
                xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <section id="agi-command-channel-status">
    <title><code>CHANNEL STATUS</code></title>

    <xi:include href="agi/channel-status-help.xml"
                xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <section id="agi-command-control-stream-file">
    <title><code>CONTROL STREAM FILE</code></title>

    <xi:include href="agi/control-stream-file-help.xml"
                xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <section id="agi-command-database-del">
    <title><code>DATABASE DEL</code></title>

    <xi:include href="agi/database-del-help.xml" xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <section id="agi-command-database-deltree">
    <title><code>DATABASE DELTREE</code></title>

    <xi:include href="agi/database-deltree-help.xml"
                xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <section id="agi-command-database-get">
    <title><code>DATABASE GET</code></title>

    <xi:include href="agi/database-get-help.xml" xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <section id="agi-command-database-put">
    <title><code>DATABASE PUT</code></title>

    <xi:include href="agi/database-put-help.xml" xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <section id="agi-command-exec">
    <title><code>EXEC</code></title>

    <para>Executes a dialplan application (see <xref
    linkend="applications" />). The arguments (called <quote>options</quote>
    below) are passed to the application. Multiple arguments are separated
    with a pipe (<code>|</code>) character.</para>

    <para>Here is a simple example using
    <command>Dial()</command>:<programlisting>EXEC Dial Zap/g1/4035551212</programlisting></para>

    <xi:include href="agi/exec-help.xml" xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <section id="agi-command-get-data">
    <title><code>GET DATA</code></title>

    <para>This is comparable to the to the <code>Background()</code>
    application in <filename>extensions.conf</filename>. Plays the audio file
    with the name <replaceable>filename</replaceable> and waits for DTMF
    input. This may be limited with
    <parameter><replaceable>max_digits</replaceable></parameter>; the maximum
    wait time is set with
    <parameter><replaceable>timeout</replaceable></parameter>.</para>

    <xi:include href="agi/get-data-help.xml" xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <section id="agi-command-get-full-variable">
    <title><code>GET FULL VARIABLE</code></title>

    <xi:include href="agi/get-full-variable-help.xml"
                xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <section id="agi-command-get-option">
    <title><code>GET OPTION</code></title>

    <xi:include href="agi/get-option-help.xml" xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <section id="agi-command-get-variable">
    <title><code>GET VARIABLE</code></title>

    <para>Similar to <code>GET FULL VARIABLE</code>, but does not understand
    complex or system variables.<tip>
        <simpara>If in doubt, use <code>GET FULL VARIABLE</code>.</simpara>
      </tip></para>

    <xi:include href="agi/get-variable-help.xml" xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <section id="agi-command-gosub">
    <title><code>GOSUB</code></title>

    <xi:include href="agi/gosub-help.xml" xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <section id="agi-command-hangup">
    <title><code>HANGUP</code></title>

    <xi:include href="agi/hangup-help.xml" xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <section id="agi-command-noop">
    <title><code>NOOP</code></title>

    <para>Does nothing, but appended text (NOOP
    [<replaceable>text</replaceable>]) will be printed out in the CLI. Always
    returns 0.</para>

    <xi:include href="agi/noop-help.xml" xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <section id="agi-command-receive-char">
    <title><code>RECEIVE CHAR</code></title>

    <xi:include href="agi/receive-char-help.xml" xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <section id="agi-command-receive-text">
    <title><code>RECEIVE TEXT</code></title>

    <xi:include href="agi/receive-text-help.xml" xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <section id="agi-command-record-file">
    <title><code>RECORD FILE</code></title>

    <xi:include href="agi/record-file-help.xml" xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <section id="agi-command-say-alpha">
    <title><code>SAY ALPHA</code></title>

    <xi:include href="agi/say-alpha-help.xml" xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <section id="agi-command-say-date">
    <title><code>SAY DATE</code></title>

    <xi:include href="agi/say-date-help.xml" xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <section id="agi-command-say-datetime">
    <title><code>SAY DATETIME</code></title>

    <para>This command follows the format</para>

    <synopsis>SAY DATETIME <replaceable>timestamp</replaceable> [<replaceable>escape_digits</replaceable>] [<replaceable>format</replaceable>] [<replaceable>timezone</replaceable>]</synopsis>

    <para>It speaks the date specified. The
    <replaceable>timestamp</replaceable> is the number of seconds since
    January 1, 1970 at 00:00:00. The <replaceable>format</replaceable> can
    include the following values:<informaltable colsep="none" frame="none"
        rowsep="none">
        <tgroup cols="2">
          <colspec colnum="1" colwidth="95pt" />

          <tbody>
            <row>
              <entry><code>'<replaceable>filename</replaceable>'</code></entry>

              <entry>A sound file</entry>
            </row>

            <row>
              <entry><code>${<replaceable>VAR</replaceable>}</code></entry>

              <entry>A variable</entry>
            </row>

            <row>
              <entry><code>A</code> or <code>a</code></entry>

              <entry>Day of the week (<emphasis>e.g.</emphasis> Monday or
              Tuesday)</entry>
            </row>

            <row>
              <entry><code>B</code>, <code>b</code> or <code>h</code></entry>

              <entry>Name of the month (<emphasis>e.g.</emphasis>
              January)</entry>
            </row>

            <row>
              <entry><code>d</code> or <code>e</code></entry>

              <entry>Ordinal number of the day of the month
              (<emphasis>e.g.</emphasis> first, second, third)</entry>
            </row>

            <row>
              <entry><code>Y</code></entry>

              <entry>Year</entry>
            </row>

            <row>
              <entry><code>I</code> or <code>i</code></entry>

              <entry>Hour (12 hour format)</entry>
            </row>

            <row>
              <entry><code>H</code></entry>

              <entry>Hour (24 hour format); 07 is called out as
              "zero-seven"</entry>
            </row>

            <row>
              <entry><code>k</code></entry>

              <entry>Hour (24 hour format); 07 is called out as
              "seven"</entry>
            </row>

            <row>
              <entry><code>M</code></entry>

              <entry>Minutes</entry>
            </row>

            <row>
              <entry><code>P</code> or <code>p</code></entry>

              <entry>AM or PM</entry>
            </row>

            <row>
              <entry><code>Q</code></entry>

              <entry><quote>Today</quote>, <quote>Yesterday</quote> or the
              contents of <code>ABdY</code></entry>
            </row>

            <row>
              <entry><code>q</code></entry>

              <entry><quote> </quote> (says nothing for today),
              <quote>Yesterday</quote>, the day of the week or the contents of
              <code>ABdY</code></entry>
            </row>

            <row>
              <entry><code>R</code></entry>

              <entry>Time, including minutes, in 24 hour format</entry>
            </row>
          </tbody>
        </tgroup>
      </informaltable></para>

    <para>The <replaceable>timezone</replaceable> is in the same format as
    that used in <filename>/etc/asterisk/voicemail.conf</filename>.</para>

    <para>Output can be interrupted with <parameter>escape_digits</parameter>.
    If you omit these parameters, you must use placeholders in the form of
    double quotes (<literal>""</literal>) .</para>

    <xi:include href="agi/say-datetime-help.xml" xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <section id="agi-command-say-digits">
    <title><code>SAY DIGITS</code></title>

    <xi:include href="agi/say-digits-help.xml" xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <section id="agi-command-say-number">
    <title><code>SAY NUMBER</code></title>

    <para>Says a number (<emphasis>e.g.</emphasis> 123 is spoken as <quote>one
    hundred and twenty-three</quote>).</para>

    <xi:include href="agi/say-number-help.xml" xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <section id="agi-command-say-phonetic">
    <title><code>SAY PHONETIC</code></title>

    <para>Says a given string using the NATO phonetic alphabet
    (<emphasis>e.g.</emphasis> a is said <quote>Alpha</quote>, b as
    <quote>Bravo</quote>, <emphasis>etc</emphasis>).</para>

    <xi:include href="agi/say-phonetic-help.xml" xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <section id="agi-command-say-time">
    <title><code>SAY TIME</code></title>

    <xi:include href="agi/say-time-help.xml" xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <section id="agi-command-send-image">
    <title><code>SEND IMAGE</code></title>

    <xi:include href="agi/send-image-help.xml" xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <section id="agi-command-send-text">
    <title><code>SEND TEXT</code></title>

    <xi:include href="agi/send-text-help.xml" xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <section id="agi-command-set-autohangup">
    <title><code>SET AUTOHANGUP</code></title>

    <xi:include href="agi/set-autohangup-help.xml"
                xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <section id="agi-command-set-callerid">
    <title><code>SET CALLERID</code></title>

    <xi:include href="agi/set-callerid-help.xml" xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <section id="agi-command-set-context">
    <title><code>SET CONTEXT</code></title>

    <para>Sets the context to go to after the AGI script has finished.</para>

    <warning>
      <para>This does not check to see if the context exists. If you provide
      an invalid context, the call will be terminated after the AGI script
      finishes.</para>
    </warning>

    <xi:include href="agi/set-context-help.xml" xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <section id="agi-command-set-extension">
    <title><code>SET EXTENSION</code></title>

    <para>Sets the extension to go to after the AGI script has
    finished.</para>

    <warning>
      <para>This does not check to see if the extension exists. If you provide
      an invalid extension, the call will be terminated after the AGI script
      finishes.</para>
    </warning>

    <xi:include href="agi/set-extension-help.xml" xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <section id="agi-command-set-music">
    <title><code>SET MUSIC</code></title>

    <xi:include href="agi/set-music-help.xml" xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <section id="agi-command-set-priority">
    <title><code>SET PRIORITY</code></title>

    <para>Sets the priority to go to after the AGI script has finished.</para>

    <warning>
      <para>This does not check to see if the priority exists. If you provide
      an invalid priority, the call will be terminated after the AGI script
      finishes.</para>
    </warning>

    <xi:include href="agi/set-priority-help.xml" xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <section id="agi-command-set-variable">
    <title><code>SET VARIABLE</code></title>

    <xi:include href="agi/set-variable-help.xml" xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <!--
  <section id="agi-command-speech-activate-grammar">
    <title><code>SPEECH ACTIVATE GRAMMAR</code></title>
    <xi:include href="agi/speech-activate-grammar-help.xml" xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <section id="agi-command-speech-create">
    <title><code>SPEECH CREATE</code></title>
    <xi:include href="agi/speech-create-help.xml" xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <section id="agi-command-speech-deactivate-grammar">
    <title><code>SPEECH DEACTIVATE GRAMMAR</code></title>
    <xi:include href="agi/speech-deactivate-grammar-help.xml" xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <section id="agi-command-speech-destroy">
    <title><code>SPEECH DESTROY</code></title>
    <xi:include href="agi/speech-destroy-help.xml" xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <section id="agi-command-speech-load-grammar">
    <title><code>SPEECH LOAD GRAMMAR</code></title>
    <xi:include href="agi/speech-load-grammar-help.xml" xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <section id="agi-command-speech-recognize">
    <title><code>SPEECH RECOGNIZE</code></title>
    <xi:include href="agi/speech-recognize-help.xml" xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <section id="agi-command-speech-set">
    <title><code>SPEECH SET</code></title>
    <xi:include href="agi/speech-set-help.xml" xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <section id="agi-command-speech-unload-grammar">
    <title><code>SPEECH UNLOAD GRAMMAR</code></title>
    <xi:include href="agi/speech-unload-grammar-help.xml" xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>
  -->

  <section id="agi-command-stream-file">
    <title><code>STREAM FILE</code></title>

    <important>
      <para><code>STREAM FILE</code> does not always work properly with
      languages other than English. In this case, you may use <code>EXEC
      Playback <replaceable>filename</replaceable></code>.</para>
    </important>

    <xi:include href="agi/stream-file-help.xml" xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <section id="agi-command-tdd-mode">
    <title><code>TDD MODE</code></title>

    <para>Activates or deactivates the transmission and reception of Telephone
    Device for the Deaf (TDD) signals on the active channel. So far only Zap
    channels support TDD.</para>

    <xi:include href="agi/tdd-mode-help.xml" xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <section id="agi-command-verbose">
    <title><code>VERBOSE</code></title>

    <xi:include href="agi/verbose-help.xml" xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>

  <section id="agi-command-wait-for-digit">
    <title><code>WAIT FOR DIGIT</code></title>

    <xi:include href="agi/wait-for-digit-help.xml"
                xpointer="xpointer(/note/*)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </section>
</appendix>
